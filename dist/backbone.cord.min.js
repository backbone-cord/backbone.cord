!function(e){"use strict";function t(t,i){var s=e.Cord._callbacks[t],r=Array.prototype.slice.call(arguments,1);delete i[t];for(var o=0;o<s.length;++o)i[t]=s[o].apply(this,r)||i[t];return i[t]}function i(t,i){t=t.split(".");var s={isView:this instanceof e.View},r=t[0].split("#"),o=r[0]?r[0]:"div",n=s.el=this._plugin("tag",s,o)||document.createElement(o),l=s.id=r[1];l&&e.Cord.setId(n,l);var a=t.slice(1);if(a=this._plugin("classes",s,a)||a,a.length&&(n.className=a.join(" ")),arguments.length>1){var c=1;if("string"!=typeof i&&1!==i.nodeType){c=2,i=JSON.parse(JSON.stringify(i)),i=this._plugin("attrs",s,i)||i;for(var h in i)i.hasOwnProperty(h)&&n.setAttribute(h,i[h])}var d=Array.prototype.slice.call(arguments,c);for(d=this._plugin("children",s,d)||d,c=0;c<d.length;++c)"string"==typeof d[c]?n.appendChild(document.createTextNode(d[c])):n.appendChild(d[c])}return e.Cord.config.idProperties&&s.isView&&l&&e.Cord.regex.testIdProperty(l)&&Object.defineProperty(this,l,{get:function(){return this.getChildById(l)},enumerable:!0,configurable:!1}),this._plugin("complete",s),n}function s(t,i,s){var r,o,n,l;if(n=t instanceof e.View?t:new t,this.model!==e.View.prototype.model&&n.model===e.View.prototype.model&&(n._invokeObservers=function(){},n.cascade&&n.cascade(this.model)===!1||n.setModel(this.model),delete n._invokeObservers),l={el:n.el,isView:this instanceof e.View},!l.isView)throw new Error("Attempting to create a subview without a parent.");if("string"==typeof i?(i=i.split("."),r=l.id=i[0].substr(1),r&&!n.el.id&&e.Cord.setId(n.el,r),o=i.slice(1),o=this._plugin("classes",l,o)||o,o.length&&(o.unshift(n.el.className),n.el.className=o.join(" "))):s=i,s){s=JSON.parse(JSON.stringify(s)),s=this._plugin("bindings",l,s)||s;for(var a in s)s.hasOwnProperty(a)&&this.listenTo(n,a,this[s[a]])}return n.sid=e.Cord._sid,e.Cord._sid+=1,n.el.setAttribute("data-sid",n.sid),this.subviews[n.sid]=n,this.listenToOnce(n,"remove",function(e){this.stopListening(e),delete this.subviews[e.sid]}),e.Cord.config.idProperties&&l.isView&&r&&e.Cord.regex.testIdProperty(r)&&Object.defineProperty(this,r,{get:function(){return this.getSubviewById(r)},set:function(t){var i,s;if(!(t instanceof e.View))throw new Error("Attempting to assign a non-Backbone.View to a subview.");i=t.el,s=this.getSubviewById(r),s.el.parentNode.insertBefore(i,s.el),s.remove(),t.sid||this._subview(t),r&&!i.id&&e.Cord.setId(i,r)},enumerable:!0,configurable:!1}),this._plugin("complete",l),n.el}function r(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function o(e){var t=e+"Search",i=e+"Value";return e="_"+e,{get:function(){return this[e]},set:function(s){this[e]=s,this[t]=new RegExp(r(s.prefix)+".*?"+r(s.suffix),"g"),this[i]=new RegExp(r(s.prefix)+"\\s*(.*?)\\s*"+r(s.suffix))}}}e.Cord={VERSION:"1.0.0",el:i,config:{idProperties:!0,oncePrefix:"%",notPrefix:"!"},regex:{idPropertyTest:/^[a-zA-Z_$][0-9a-zA-Z_$]*$/,idSelectorValues:/#([a-zA-Z_$][0-9a-zA-Z_$]*)/g},plugins:[],EmptyView:e.View.extend({el:function(){return document.createElement("meta")}}),convertToString:function(e){return null===e||void 0===e?"":e.toString()},convertToBool:function(e){return e&&(void 0===e.length||e.length)},_sid:1,_pluginsChecked:!1,_subview:s,_plugin:t,_scopes:{},_callbacks:{tag:[],classes:[],attrs:[],children:[],bindings:[],complete:[],initialize:[],remove:[],strings:[]}},e.Cord.setId=function(e,t){e.id=t},e.Cord.regex.replaceIdSelectors=function(e){return e},e.Cord.regex.testIdProperty=function(e,t){var i=this.idPropertyTest.test(e);if(!i&&!t)throw new Error('Invalid id "'+e+'" used');return i},Object.defineProperties(e.Cord.regex,{variable:o("variable"),conditional:o("conditional"),expression:o("expression")}),e.Cord.regex.variable={prefix:"{",suffix:"}"},e.Cord.regex.conditional={prefix:"(",suffix:")"},e.Cord.regex.expression={prefix:":=",suffix:"=:"},e.Cord.plugins._check=function(){var e,t,i,s={};for(e=0;e<this.length;++e)s[this[e].name]=!0;for(e=0;e<this.length;++e)if(i=this[e],i.requirements)for(t=0;t<i.requirements.length;++t)if(!s[i.requirements[t]])throw new Error('Backbone.Cord plugin "'+i.name+'" requires missing plugin "'+i.requirements[t]+'"')},e.Cord.plugins._register=function(t,i){if(t.config)for(var s in t.config)t.config.hasOwnProperty(s)&&!e.Cord.config.hasOwnProperty(s)&&(e.Cord.config[s]=t.config[s]);for(var r in e.Cord._callbacks)e.Cord._callbacks.hasOwnProperty(r)&&"function"==typeof t[r]&&i.call(e.Cord._callbacks[r],t[r]);return t.scope&&(e.Cord._scopes[t.name]=t.scope),i.call(this,t)},e.Cord.plugins.unshift=function(e){return this._register(e,Array.prototype.unshift)},e.Cord.plugins.push=function(e){return this._register(e,Array.prototype.push)},e.View.prototype._el=i,e.View.prototype._subview=s,e.View.prototype._plugin=t,e.View.prototype._getWrappedProperty=function(e){return this["_"+e]},e.View.prototype._setWrappedProperty=function(e,t){this["_"+e]=t},e.View.prototype._wrappedPropertyDescriptor=function(e){var t=this["_get"+e[0].toUpperCase()+e.substr(1)],i=this["_set"+e[0].toUpperCase()+e.substr(1)];return t||(t=function(){return this._getWrappedProperty(e)}),i||(i=function(t){this._setWrappedProperty(e,t)}),{get:t,set:i,configurable:!0,enumerable:!0}},e.View.prototype._modelObserver=function(e,t){var i,s=t._changed||e.changedAttributes();if(s)for(i in s)s.hasOwnProperty(i)&&this._invokeObservers(i,s[i])},e.View.prototype._getObservers=function(e,t){var i;return i=t?this._observers[t]||{}:this._modelObservers,e&&(i=i[e]||[]),i},e.View.prototype._invokeObservers=function(e,t,i){console.log(e,t,i);var s,r=this._getObservers(e,i);for(s=0;s<r.length;++s)r[s].call(this,e,t);return this},e.View.prototype.observe=function(t,i,s){var r,o,n,l,a,c,h;if("string"==typeof i&&(i=this[i]),!i)return this;if(c=e.Cord._scopes,0===t.indexOf(e.Cord.config.oncePrefix))return t=t.substr(e.Cord.config.oncePrefix.length),setTimeout(function(){i.call(this,null,this.getValue.call(this,t))}.bind(this),0),this;if(0===t.indexOf(e.Cord.config.notPrefix)){var d=i;t=t.substr(e.Cord.config.notPrefix.length),i=function(t,i){d.call(this,t,!e.Cord.convertToBool(i))}}s&&(o=function(e,t){i.call(this,e,t?c[t].getValue.call(this,e):this.model.get(e))});for(r in c)if(c.hasOwnProperty(r)&&(a=c[r],n=a.getKey.call(this,t),"string"==typeof n)){t=n,a.observe.call(this,t,i,s),this._observers[r]||(this._observers[r]={}),h=this._observers[r],l=!0;break}return l||(r=null,h=this._modelObservers,"id"===t&&(t=this.model.idAttribute)),h[t]||(h[t]=[]),h[t].push(i),s&&setTimeout(o.bind(this,t,r),0),this},e.View.prototype.unobserve=function(t,i){var s,r,o,n,l,a,c=e.Cord._scopes;if("string"==typeof i&&(i=this[i]),!i)return this;for(r in c)if(c.hasOwnProperty(r)&&(a=c[r],s=a.getKey.call(this,t),"string"==typeof s)){t=s,o=this._observers[r],l=!0;break}return l||(o=this._modelObservers,"id"===t&&(t=this.model.idAttribute)),n=o[t].indexOf(i),-1!==n&&o[t].splice(n,1),o.length||delete o[t],l&&a.unobserve.call(this,t,i),this},e.View.prototype.getValue=function(t){var i,s,r,o=e.Cord._scopes;for(s in o)if(o.hasOwnProperty(s)&&(r=o[s],i=r.getKey.call(this,t),"string"==typeof i))return r.getValue.call(this,i);return"id"===t?this.model.id:this.model.get(t)},e.View.prototype.setValue=function(t,i){var s,r,o,n=e.Cord._scopes;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],s=o.getKey.call(this,t),"string"==typeof s))return o.setValue.call(this,s,i),this;return"id"===t&&(t=this.model.idAttribute),this.model.set(t,i),this},e.View.prototype.getChildById=function(e){return document.getElementById(e)},e.View.prototype.getSubviewById=function(e){var t=this.getChildById(e);return t?this.subviews[t.getAttribute("data-sid")]:null},e.View.prototype.model=new(e.Model.extend({set:function(){return this}})),e.View.prototype.setModel=function(t,i){var s,r,o;if(this.model===t)return this;if(t||(t=e.View.prototype.model),!(t instanceof e.Model))throw new Error("Attempting to assign a non-Backbone.Model to View.model.");if(r=this.model,this.model=t,this.stopListening(r),this.listenTo(this.model,"change",this._modelObserver),Object.keys(this._modelObservers).length)if(this.model===e.View.prototype.model)for(s in this._modelObservers)this._modelObservers.hasOwnProperty(s)&&this._invokeObservers(s);else this._modelObserver(this.model,{_changed:r.changedAttributes(this.model.attributes)});if(!i)for(s in this.subviews)if(this.subviews.hasOwnProperty(s)){if(o=this.subviews[s],o.cascade&&o.cascade(t)===!1)continue;o.model!==r||o.collection||o.setModel(t)}return this},e.View.prototype.setCollection=function(e){return this.stopListening(this.collection),this.collection=e,this};var n=e.View.prototype._ensureElement;e.View.prototype._ensureElement=function(){e.Cord._pluginsChecked||(e.Cord.plugins._check(),e.Cord._pluginsChecked=!0);var t=Object.getPrototypeOf(this);if("function"==typeof t.collection?this.collection=new t.collection:"function"==typeof t.model&&(this.model=new t.model),this._plugin("initialize",{}),this.properties)for(var i in this.properties)this.properties.hasOwnProperty(i)&&(Object.defineProperty(this,i,this._wrappedPropertyDescriptor(i)),this[i]=this.properties[i]);"function"==typeof this.el&&(this.el=this.el.bind(this,this._el.bind(this),this._subview.bind(this))),this.subviews={},this._observers={},this._modelObservers={},this._sharedObservers={},this.model!==e.View.prototype.model&&this.listenTo(this.model,"change",this._modelObserver);var s=n.apply(this,Array.prototype.slice.call(arguments));return this.className&&(this.el.className+=(this.el.className.length?" ":"")+this.className),s};var l=e.View.prototype.remove;e.View.prototype.remove=function(){var e;this._plugin("remove",{});for(e in this.subviews)this.subviews.hasOwnProperty(e)&&this.subviews[e].remove();return this.subviews=null,this._observers=null,this._modelObservers=null,this._sharedObservers=null,this.trigger("remove",this),l.apply(this,Array.prototype.slice.call(arguments))},e.Model.prototype.track=function(e,t,i){if("function"==typeof t&&(i=t,t=null),i=i||function(e){return e},t){var s=function(e){return function(t,s,r){var o={};o[e]=s,r._track||(r._track=!0,this.set(i(o),r))}};"string"==typeof t&&(t=[t]);for(var r=0;r<t.length;++r)this.listenTo(e,"change:"+t[r],s(t[r]))}else this.listenTo(e,"change",function(e,t){t._track||(t._track=!0,this.set(i(e.attributes),t))})},e.Model.prototype.subsume=function(e,t,i){var s=new e;return"function"==typeof t&&(i=t,t=null),i=i||s.transform||function(e){return e},s.listenTo(this,"request sync error",function(){this.trigger.apply(this,Array.prototype.slice.call(arguments))}),t?(Object.keys(this.get(t)).length&&s.set(i(s.parse(this.get(t)))),s.track(this,t,function(e){return e[t]}),this.track(s,function(e){var i={};return i[t]=e,i})):(Object.keys(this.attributes).length&&s.set(i(s.parse(this.attributes))),s.track(this,i)),s},e.Model.prototype.mirror=function(e,t){this.track(e,t),e.track(this,t)}}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone),function(e){"use strict";function t(t,i){return r[i]?function(s,r){if("checked"===i?t[i]=e.Cord.convertToBool(r):t[i]=e.Cord.convertToString(r),e.Cord.config.bindingDispatchChangeEvents&&o[i]){var n=document.createEvent("HTMLEvents");n.initEvent("change",!0,!0),t.dispatchEvent(n)}}:function(s,r){t.setAttribute(i,e.Cord.convertToString(r))}}function i(t){return function(i,s){t.textContent=e.Cord.convertToString(s)}}function s(e){return function(t){var i=t.currentTarget,s=n[i.getAttribute("data-type")||i.getAttribute("type")];this.setValue(e,s?s.call(this,i):i.value)}}var r={innerHTML:!0,value:!0,checked:!0},o={value:!0,checked:!0},n={range:function(e){return parseInt(e.value)},number:function(e){return Number(e.value)},integer:function(e){return parseInt(e.value)},decimal:function(e){return parseFloat(e.value)},checkbox:function(e){return e.checked}};e.Cord.plugins.push({name:"binding",requirements:["interpolation"],config:{bindingDispatchChangeEvents:!0},attrs:function(i,r){var n,l,a;if(i.isView){for(var c in r)r.hasOwnProperty(c)&&(n=r[c],"string"==typeof n&&n.match(e.Cord.regex.variableSearch)&&(this.observeFormat(n,t(i.el,c),!0),e.Cord.config.bindingDispatchChangeEvents&&o[c]&&(a=!0),delete r[c]));r.change&&(l=s(r.change).bind(this),i.el.addEventListener("change",l),delete r.change),r.input&&(l=s(r.input).bind(this),i.el.addEventListener("input",l),delete r.input),l&&!a&&setTimeout(l,0,{currentTarget:i.el})}},children:function(t,s){var r,o,n,l,a,c,h;if(t.isView)for(r=s.length-1;r>=0;--r)if(n=s[r],"string"==typeof n&&(l=n.split(e.Cord.regex.variableSearch),l.length>1)){for(c=[r,1],a=n.match(e.Cord.regex.variableSearch),o=0;o<a.length;++o)l[o].length&&c.push(document.createTextNode(l[o])),h=document.createTextNode(""),this.observe(e.Cord.regex.variableValue.exec(a[o])[1],i(h),!0),c.push(h);l[o].length&&c.push(document.createTextNode(l[o])),Array.prototype.splice.apply(s,c)}}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone),function(e){"use strict";function t(){this._length=this.collection.length}function i(){return this._start+1}function s(){return this._end+1}function r(e){var t=0;-1===e&&(this._pageStart>0&&(t=this._pageStart),t>this._length&&(t=this._length),this._pageLength||(t=0),this._start=t)}function o(e){var t=this._length-1;-1===e&&(this._pageLength>0&&(t=this._start+this._pageLength-1),t>=this._length&&(t=this._length-1),this._pageLength||(t=-1),this._end=t)}function n(e){-1===e&&(this._more=this._length-(this._end+1))}function l(){this.length=0,this.start=-1,this.end=-1,this.more=-1}function a(e){this._pageStart!==e&&(this._pageStart=e,b.call(this))}function c(e){this._pageLength!==e&&(this._pageLength=e,b.call(this))}function h(e){var t;this._selected!==e&&(this._selected=e,this.setModel(e),this.trigger("select",e),t=this.itemViews._selected,t&&(t.selected=!1),e?(t=this.itemViews[e.cid],this.itemViews._selected=t,t.selected=!0):delete this.itemViews._selected)}function d(){return this.getChildById(e.Cord.config.collectionContainerId)||this.el}function p(e){var t=new this.itemView({model:e});if(t.sid)throw new Error("Item views cannot be passed or created through the subview() method.");return this.listenTo(t,"select",h),this.itemViews[t.model.cid]=t,t}function f(){var e,t,i,s,r,o;if(o=d.call(this),o&&this._length)if(0===this._start&&this._end===this._length-1){for(r=this.itemViews._first.el,e=0;e<this._length;++e)i=this.collection.at(e),s=this.itemViews[i.cid],o.insertBefore(s.el,r),r=s.el.nextSibling;this.itemViews._first=this.itemViews[this.collection.at(0).cid]}else{var n={},l=Object.keys(this.itemViews);for(e=0;e<l.length;++e)n[l[e]]=!0;for(n._first=!1,n._selected=!1,e=this._start;e<=this._end;++e)t=this.collection.at(e).cid,this.itemViews[t]?n[t]=!1:this.itemViews[t]=p.call(this,this.collection.at(e));for(t in n)n.hasOwnProperty(t)&&n[t]&&(s=this.itemViews[t],this._selected===s.model&&(this.selected=null),delete this.itemViews[t],this.stopListening(s),s.remove());for(e=this._start;e<=this._end;++e)s=this.itemViews[this.collection.at(e).cid],o.appendChild(s.el);this.itemViews._first=this.itemViews[this.collection.at(this._start).cid]}}function u(e,t,i){var s,r,o,n;l.call(this),r=d.call(this),r&&(n=void 0===i.index?this._length-1:i.index,n<this._start||n>this._end||(n-=this._start,this._end-this._start+1===this._pageLength&&r.removeChild(r.lastChild),s=p.call(this,e),n===this._end?r.appendChild(s.el):(o=this.itemViews[t.at(this._start+n+1).cid].el,o.parentNode.insertBefore(s.el,o)),0===n&&(this.itemViews._first=s)))}function g(e,t,i){var s,r,o=this._more;l.call(this),r=d.call(this),r&&(this._selected===e&&(this.selected=null),s=this.itemViews[e.cid],s&&(delete this.itemViews[e.cid],this.stopListening(s),s.remove(),i.index>=this._start&&i.index<=this._end&&o&&(s=p.call(this,t.at(this._end)),r.appendChild(s.el)),this.itemViews._first=this.itemViews[t.at(this._start).cid]))}function b(){var e,t,i,s;if(v.call(this),l.call(this),s=d.call(this),s&&this._length){for(i=document.createDocumentFragment(),e=this._start;e<=this._end;++e)t=p.call(this,this.collection.at(e)),e===this._start&&(this.itemViews._first=t),i.appendChild(t.el);s.appendChild(i)}}function y(){this.listenTo(this.collection,"add",u),this.listenTo(this.collection,"remove",g),this.listenTo(this.collection,"sort",f),this.listenTo(this.collection,"reset",b)}function v(){var e,t;if(this.itemViews){delete this.itemViews._first,delete this.itemViews._selected;for(e in this.itemViews)this.itemViews.hasOwnProperty(e)&&(t=this.itemViews[e],this.stopListening(t),t.remove())}this.itemViews={},this.selected=null}function m(e){var t,i;if(i=e.cid,"number"==typeof e){var s=this.collection.at(e);s&&(i=s.cid)}else if(1===e.nodeType)for(t in this.itemViews)if(this.itemViews.hasOwnProperty(t)&&this.itemViews[t].el===e){i=t;break}return i?this.itemViews[i]:void 0}var _=e.View.prototype.setCollection;e.View.prototype.setCollection=function(t){if(this.collection!==t){var i=_.call(this,t);return this.isCollectionView&&(t||(t=new e.Collection),y.call(this),b.call(this)),i}},e.Cord.plugins.push({name:"collection",config:{collectionContainerId:"container"},initialize:function(){this.collection&&this.itemView&&(this.isCollectionView=!0,this.getItemView=m,this._getStart=i,this._getEnd=s,this._setLength=t,this._setStart=r,this._setEnd=o,this._setMore=n,this._setPageStart=a,this._setPageLength=c,this._setSelected=h,this._pageStart=0,this._pageLength=-1,this._selected=null,Object.defineProperty(this,"length",this._wrappedPropertyDescriptor("length")),Object.defineProperty(this,"start",this._wrappedPropertyDescriptor("start")),Object.defineProperty(this,"end",this._wrappedPropertyDescriptor("end")),Object.defineProperty(this,"more",this._wrappedPropertyDescriptor("more")),Object.defineProperty(this,"pageStart",this._wrappedPropertyDescriptor("pageStart")),Object.defineProperty(this,"pageLength",this._wrappedPropertyDescriptor("pageLength")),Object.defineProperty(this,"selected",this._wrappedPropertyDescriptor("selected")),y.call(this),l.call(this),setTimeout(b.bind(this),0))},remove:function(){this.isCollectionView&&this.itemViews&&v.call(this)}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone),function(e){"use strict";function t(t,i){return function(s,r){var o=e.Cord.convertToBool(r),n=t.className.split(" "),l=n.indexOf(i);o&&-1===l?n.push(i):o||-1===l||n.splice(l,1),t.className=n.join(" ")}}e.Cord.plugins.push({name:"conditionalclasses",classes:function(i,s){var r;if(i.isView)for(var o=s.length-1;o>=0;--o)if(r=s[o].match(e.Cord.regex.conditionalValue)){var n=i.el,l=s[o].substr(0,r.index),a=r[1];this.observe(a,t(n,l),!0),s.splice(o,1)}}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone),function(e){"use strict";var t=e.View.prototype.getChildById;e.View.prototype.getChildById=function(e){return this.el.querySelector('[data-id="'+e+'"]')||t.call(this,e)},e.Cord.setId=function(e,t){e.setAttribute("data-id",t)},e.Cord.regex.replaceIdSelectors=function(e){return e.replace(this.idSelectorValues,'[data-id="$1"]')};var i=e.View.extend;e.View.extend=function(t){var s,r;if(t.events)for(s in t.events)t.events.hasOwnProperty(s)&&-1!==s.indexOf("#")&&(r=t.events[s],delete t.events[s],s=e.Cord.regex.replaceIdSelectors(s),t.events[s]=r);return i.apply(this,Array.prototype.slice.call(arguments))},e.Cord.plugins.push({name:"dataid"})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone),function(e){"use strict";function t(t){var i="dynamic-class-"+Math.floor(9999999*Math.random());return function(s,r){var o=t.className.length?t.className.split(" "):[],n=o.indexOf(i);-1!==n?o[n+1]=e.Cord.convertToString(r):(o.push(i),o.push(e.Cord.convertToString(r))),t.className=o.join(" ")}}e.Cord.plugins.push({name:"dynamicclasses",requirements:["interpolation"],classes:function(i,s){if(i.isView)for(var r=s.length-1;r>=0;--r)-1!==s[r].search(e.Cord.regex.variableSearch)&&(this.observeFormat(s[r],t(i.el),!0),s.splice(r,1))}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone),function(e){"use strict";function t(e,t){for(var i in t)if("on"===i.substr(0,2)&&t.hasOwnProperty(i)){var s="string"==typeof t[i]?this[t[i]]:t[i];"function"==typeof s&&(e.isView&&(s=s.bind(this)),e.el.addEventListener(i.substr(2),s)),delete t[i]}}e.View.prototype.focus=function(e){var t=e?this.getChildById(e):this.el;t.getAttribute("tabindex")||(t.setAttribute("tabindex",-1),t.style.outline="none"),t.focus()},e.Cord.plugins.push({name:"events",attrs:t,bindings:t})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone),function(e){"use strict";function t(t){var i=null;return function(s,r){var o=e.Cord.convertToBool(r);null===i&&(i=t.style.display),t.style.display=o?"none":i}}function i(e,i){e.isView&&i.hidden&&(this.observe(i.hidden,t(e.el),!0),delete i.hidden)}e.Cord.plugins.push({name:"hidden",attrs:i,bindings:i})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone),function(e){"use strict";function t(e,t,i){return function(s){var r,o,n=[];for(r=0;r<t.length;++r)n.push(e[r]),o=t[r],n.push(this.getValue(o));n.push(e[r]),i(s,n.join(""))}}e.View.prototype.observeFormat=function(i,s,r){var o=i.split(e.Cord.regex.variableSearch),n=i.match(e.Cord.regex.variableSearch);if(n)if(1===n.length&&n[0]===i)this.observe(e.Cord.regex.variableValue.exec(n[0])[1],s,r);else{var l,a={};for(l=0;l<n.length;++l)n[l]=e.Cord.regex.variableValue.exec(n[l])[1];for(l=0;l<n.length;++l)a[n[l]]||(this.observe(n[l],t(o,n,s),r),a[n[l]]=!0,r=!1)}},e.Cord.plugins.push({name:"interpolation"})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone),function(e){"use strict";function t(t,i){var s,r,o=t.split(e.Cord.regex.variableSearch),n=t.match(e.Cord.regex.variableSearch),l="this."+i+" = ";for(s=0;s<n.length;++s)l+=o[s],r=n[s]=e.Cord.regex.variableValue.exec(n[s])[1],l+='Number(this.getValue("'+r+'"))';l+=o[s]+";";var a=new Function(l);for(s=0;s<n.length;++s)r=n[s],this.observe(r,a,!s);var c=this._wrappedPropertyDescriptor(i);c.enumerable=!1,Object.defineProperty(this,i,c)}function i(i){var s,r,o,n,l=i.split(e.Cord.regex.expressionSearch),a=i.match(e.Cord.regex.expressionSearch);if(!a)return i;for(s=0;s<a.length;++s)r=e.Cord.regex.expressionValue.exec(a[s])[1],o="expr"+Math.floor(9999999*Math.random()),a[s]=e.Cord.regex.variable.prefix+e.Cord.config.viewPrefix+o+e.Cord.regex.variable.suffix,t.call(this,r,o);for(n="",s=0;s<a.length;++s)n+=l[s],n+=a[s];return n+=l[s]}e.Cord.plugins.unshift({name:"math",requirements:["viewscope"],attrs:function(t,s){if(t.isView)for(var r in s)s.hasOwnProperty(r)&&"string"==typeof s[r]&&e.Cord.regex.expressionSearch.test(s[r])&&(s[r]=i.call(this,s[r]))},children:function(t,s){if(t.isView)for(var r=0;r<s.length;++r)"string"==typeof s[r]&&e.Cord.regex.expressionSearch.test(s[r])&&(s[r]=i.call(this,s[r]))},strings:function(t,s){for(var r in s)s.hasOwnProperty(r)&&"string"==typeof s[r]&&e.Cord.regex.expressionSearch.test(s[r])&&(s[r]=i.call(this,s[r]))}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone),function(e){"use strict";function t(){var t,i;e.Cord._styleSheets={};for(i in e.Cord.mediaQueries)e.Cord.mediaQueries.hasOwnProperty(i)&&(t=document.createElement("style"),t.type="text/css",e.Cord.mediaQueries[i]&&(t.media=e.Cord.mediaQueries[i]),t.appendChild(document.createTextNode("")),document.head.appendChild(t),e.Cord._styleSheets[i]=t.sheet)}function i(e){var t,i,s=0,r=[];for(t=0;t<e.length;++t)i=e.charCodeAt(t),i>=65&&90>=i&&t&&(r.push(e.substring(s,t).toLowerCase()),s=t);return r.push(e.substring(s,t).toLowerCase()),r.join("-")}function s(t,r,o,n,l){var a,c,h,d;n=n||"all",c=e.Cord._styleSheets[n];for(a in t)if(t.hasOwnProperty(a))if("object"==typeof t[a]){if(h=d=null,0===a.indexOf(e.Cord.config.mediaPrefix)&&(h=a.substr(e.Cord.config.mediaPrefix.length),!e.Cord.mediaQueries[h]))return;!h&&e.Cord.mediaQueries[a]&&(h=a),h||(("_"===a[0]||"#"===a[0])&&(d=a.substr(1)),d&&!e.Cord.regex.testIdProperty(d,!0)&&(d=null)),h?s(t[a],r,o,h):d?s(t[a],r,o+">"+e.Cord.regex.replaceIdSelectors("#"+d),n,d):s(t[a],r,o+">"+e.Cord.regex.replaceIdSelectors(a),n)}else e.Cord.regex.variableSearch.test(t[a])?l&&(r[l]||(r[l]={}),r[l][a]=t[a]):(console.log("@"+n+" "+o+"{"+i(a)+":"+t[a]+";}"),c.insertRule(o+"{"+i(a)+":"+t[a]+";}",0))}function r(t,i){return function(s,r){t.style[i]=e.Cord.convertToString(r)}}function o(t,i){var s=i.style;if(s&&("string"==typeof s&&t.isView&&this[s]&&(s=this[s]),"object"==typeof s)){for(var o in s)s.hasOwnProperty(o)&&(s[o].match(e.Cord.regex.variableSearch)&&t.isView?this.observeFormat(s[o],r(t.el,o),!0):t.el.style[o]=s[o]);delete i.style}}e.Cord.mediaQueries={all:"",hd:"only screen and (max-width: 1200px)",desktop:"only screen and (max-width: 992px)",tablet:"only screen and (max-width: 768px)",phablet:"only screen and (max-width: 480px)",mobile:"only screen and (max-width: 320px)"};var n=e.View.extend;e.View.extend=function(i){var r={};i.styles&&i.className&&(e.Cord._styleSheets||t(),s(i.styles,r,"."+i.className));var o=n.apply(this,Array.prototype.slice.call(arguments));return o.prototype._styles=r,o},e.Cord.plugins.push({name:"styles",requirements:["interpolation"],config:{mediaPrefix:"@"},attrs:o,bindings:o,complete:function(e){if(this._styles&&e.id&&this._styles[e.id]){var t=JSON.parse(JSON.stringify(this._styles[e.id]));console.log(JSON.stringify(t)),this._plugin("strings",e,t);for(var i in t)t.hasOwnProperty(i)&&this.observeFormat(t[i],r(e.el,i),!0)}}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone),function(e){"use strict";function t(t){this.listenTo(t,"request",function(){this.syncing=!0}),this.listenTo(t,"sync",function(){this.syncing=!1,this.error=null}),this.listenTo(t,"error",function(t,i,s){this.syncing=!1,this.error=e.Cord.parseError(i,s)})}function i(){var e="syncing";this.collection?(this[e]=!!this.collection[e],t.call(this,this.collection)):this.model&&(this[e]=!!this.model[e],t.call(this,this.model))}var s=e.Model.prototype.sync;e.Model.prototype.sync=function(){return this.__syncListening||(this.__syncListening=!0,t.call(this,this)),s.apply(this,Array.prototype.slice.call(arguments))};var r=e.Collection.prototype.sync;e.Collection.prototype.sync=function(){return this.__syncListening||(this.__syncListening=!0,t.call(this,this)),r.apply(this,Array.prototype.slice.call(arguments))};var o=e.View.prototype.setModel;e.View.prototype.setModel=function(e,t){var s=o.call(this,e,t);return i.call(this),s};var n=e.View.prototype.setCollection;e.View.prototype.setCollection=function(e){var t=n.call(this,e);return i.call(this),t},e.Cord.parseError=function(e){return e.status},e.Cord.plugins.push({name:"syncing",initialize:function(e){if(e.isView){var t;t="syncing",Object.defineProperty(this,t,this._wrappedPropertyDescriptor(t)),t="error",Object.defineProperty(this,t,this._wrappedPropertyDescriptor(t)),i.call(this)}}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone),function(e){"use strict";function t(e){var t,s=e.changedAttributes();if(s)for(t in s)s.hasOwnProperty(t)&&this._invokeObservers(t,s[t],i)}var i="sharedscope";e.Cord.shared=new e.Model,e.Cord.plugins.push({name:i,config:{sharedPrefix:"$"},scope:{getKey:function(t){return 0===t.indexOf(e.Cord.config.sharedPrefix)?t.substr(e.Cord.config.sharedPrefix.length):void 0},observe:function(){Object.keys(this._getObservers(null,i)).length||this.listenTo(e.Cord.shared,"change",t)},unobserve:function(){Object.keys(this._getObservers(null,i)).length||this.stopListening(e.Cord.shared,"change",t)},getValue:function(t){return e.Cord.shared.get(t)},setValue:function(t,i){e.Cord.shared.set(t,i)}}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone),function(e){"use strict";function t(e,t){var s=function(s){t?t.call(this,s):this._setWrappedProperty(e,s),this._invokeObservers(e,this[e],i)};return s._cordWrapped=!0,s._prevSet=t,s}var i="viewscope";e.Cord.plugins.push({name:i,config:{viewPrefix:"_"},scope:{getKey:function(t){return 0===t.indexOf(e.Cord.config.viewPrefix)?t.substr(e.Cord.config.viewPrefix.length):void 0},observe:function(e){var i=Object.getOwnPropertyDescriptor(this,e);i&&(i.set._cordWrapped||(i.set?Object.defineProperty(this,e,{set:t.call(this,e,i.set)}):(this._setWrappedProperty(e,this[e]),delete this[e]&&Object.defineProperty(this,e,{get:this._getWrappedProperty.bind(this,e),set:t.call(this,e),enumerable:!0,configurable:!0}))))},unobserve:function(e){if(!this._getObservers(e,i).length){var t=Object.getOwnPropertyDescriptor(this,e);if(t.set._prevSet)Object.defineProperty(this,e,{set:t.set._prevSet});else{var s=this[e];delete this[e],this[e]=s}}},getValue:function(e){return this[e]},setValue:function(e,t){this[e]=t}}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone);