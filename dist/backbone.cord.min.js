!function(e){"use strict";function t(e){return e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}function i(e){var r,o,n={};for(r in e)e.hasOwnProperty(r)&&(o=e[r],t(o)&&(o=i(o)),n[r]=o);return n}function r(e,t){var i,r;for(t=Array.isArray(t)?t:t.split("."),i=0;i<t.length;++i)r=t[i],e instanceof w.Cord.View?(w.Cord._scopes[r.toLowerCase()]&&i+1<t.length&&(i+=1,r=r+"."+t[i]),e=e.getValueForKey(r)):e instanceof w.Model?e="id"===r?e.id:e.get(r):e&&(e="value"===r&&e.nodeType===Node.ELEMENT_NODE?w.Cord.decodeValue(e):e[r]);return e}function o(e,t,i){var o;t=Array.isArray(t)?t:t.split("."),e=r(e,t.slice(0,-1)),o=t[t.length-1],e instanceof w.Cord.View?e.setValueForKey(o,i):e instanceof w.Model?e.set("id"===o?e.idAttribute:o,i):e&&("value"===o&&e.nodeType===Node.ELEMENT_NODE?w.Cord.encodeValue(e,i):e[o]=i)}function n(e,t){return function(){return e.apply(this,arguments),t.apply(this,arguments)}}function s(e,t){return function(){var i=e.apply(this,arguments),r=Object.getPrototypeOf(Object.getPrototypeOf(this));return r&&r[t]?r[t].apply(this,arguments):i||this}}function l(e){var r,o,s,a,c;for("string"==typeof e&&(e=w.Cord.mixins[e]||{}),e=i(e),r=1;r<arguments.length;++r){a=arguments[r],"string"==typeof a&&(a=w.Cord.mixins[a]||{});for(o in a)a.hasOwnProperty(o)&&(s=e[o],c=a[o],t(s)&&t(c)?e[o]=l(s,c):"function"==typeof s&&"function"==typeof c?e[o]=n(s,c):e[o]=c)}return e}function a(){var e,t,i=l.apply(this,arguments),r=arguments[arguments.length-1];"string"==typeof r&&(r=w.Cord.mixins[r]||{});for(e in i)i.hasOwnProperty(e)&&(t=i[e],"function"==typeof t&&"function"!=typeof r[e]&&(i[e]=s(t,e)));return i}function c(e,t,i){for(var r=i?e.prototype:Object.getPrototypeOf(e),o=[];r;r=Object.getPrototypeOf(r))r.hasOwnProperty(t)&&o.unshift(r[t]);return o}function d(e,t){var i=w.Cord._callbacks[e],r=Array.prototype.slice.call(arguments,1);delete t[e];for(var o=0;o<i.length;++o)t[e]=i[o].apply(this,r)||t[e];return t[e]}function h(e,t){e=e.split(".");var r={isView:this instanceof w.Cord.View},o=e[0].split("#"),n=o[0]?o[0]:"div",s=r.el=this._callPlugins("tag",r,n)||document.createElement(n),l=r.id=o[1];l&&w.Cord.setId(s,l,this.vuid);var a=e.slice(1);if(w.Cord.addClass(s,this._callPlugins("classes",r,a)||a),arguments.length>1){var c=1;if(!("string"==typeof t||t instanceof w.View||t instanceof Node)){c=2,t=i(t),t=this._callPlugins("attrs",r,t)||t;for(var d in t)t.hasOwnProperty(d)&&s.setAttribute(d,t[d])}var h,u=Array.prototype.slice.call(arguments,c);for(u=this._callPlugins("children",r,u)||u,c=0;c<u.length;++c)h=u[c],"string"==typeof h?s.appendChild(document.createTextNode(h)):h instanceof w.View?s.appendChild(h.el):s.appendChild(h)}return w.Cord.config.idProperties&&r.isView&&l&&w.Cord.regex.testIdProperty(l)&&Object.defineProperty(this,l,{get:function(){return this.getChildById(l)},enumerable:!0,configurable:!1}),this._callPlugins("complete",r)||s}function u(e,t,r,o){var n,s,l,a,c;if(l=e instanceof w.View?e:new e,this.model!==w.Cord.EmptyModel&&l.model===w.Cord.EmptyModel&&!l.collection&&l instanceof w.Cord.View&&(l._invokeObservers=function(){},l.cascade&&l.cascade(this.model)===!1||l.setModel(this.model),delete l._invokeObservers),a={el:l.el,isView:this instanceof w.Cord.View,subview:l},!a.isView)throw new Error("Attempting to create a subview without a parent.");if("string"==typeof t?(t=t.split("."),n=a.id=t[0].substr(1),n&&!w.Cord.hasId(l.el)&&w.Cord.setId(l.el,n,this.vuid),s=t.slice(1),w.Cord.addClass(l.el,this._callPlugins("classes",a,s)||s)):(o=r,r=t),r){r=i(r),r=this._callPlugins("bindings",a,r)||r;for(var d in r)r.hasOwnProperty(d)&&(c="string"==typeof r[d]?this[r[d]]||C(r[d]):r[d],"function"==typeof c&&(l.properties&&l.properties.hasOwnProperty(d)?l.observe(d,c.bind(this)):this.listenTo(l,d,c)))}return o&&l.setValuesForKeys(o),l.sid=w.Cord._sid,w.Cord._sid+=1,l.el.setAttribute("data-sid",l.sid),this.subviews[l.sid]=l,this.listenToOnce(l,"remove",function(e){this.stopListening(e),delete this.subviews[e.sid]}),w.Cord.config.idProperties&&a.isView&&n&&w.Cord.regex.testIdProperty(n)&&Object.defineProperty(this,n,{get:function(){return this.getSubviewById(n)},set:function(e){var t,i;if(!(e instanceof w.View))throw new Error("Attempting to assign a non-Backbone.View to a subview.");t=e.el,i=this.getSubviewById(n),i.el.parentNode.insertBefore(t,i.el),i.remove(),e.sid||this._createSubview(e),w.Cord.hasId(t)?n!==w.Cord.getId(t)&&delete this[n]:w.Cord.setId(t,n,this.vuid)},enumerable:!0,configurable:!0}),this._callPlugins("complete",a),l}function f(e){return document.createTextNode(e)}function p(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function g(e){var t=e+"Search",i=e+"Value";return e="_"+e,{get:function(){return this[e]},set:function(r){this[e]=r,this[t]=new RegExp(p(r.prefix)+".*?"+p(r.suffix),"g"),this[i]=new RegExp(p(r.prefix)+"\\s*(.*?)\\s*"+p(r.suffix))}}}function b(e,t){var i=function(i){t?t.call(this,i):this["_"+e]=i,this._invokeObservers("this",e,this[e])};return i._cordWrapped=!0,i._prevSet=t,i}function y(e,t){return function(i,r){for(var o=0;o<t.length;++o)r=t[o](r);return e.call(this,i,r)}}function v(e){return function(t,i){e.call(this,t,!w.Cord.convertToBool(i))}}function m(e,t){return function(i,o){return e.call(this,i,r(o,t))}}function C(e){return function(){this.setValueForKey(e,arguments[arguments.length-1])}}var w=e.Backbone||require("backbone"),_=e.cordCompatibilityMode,V=e.cordDebug;w.Cord={VERSION:"1.0.12",config:{idProperties:!0},regex:{idPropertyTest:/^[a-zA-Z_$][0-9a-zA-Z_$]*$/,idSelectorValues:/#([a-zA-Z_$][0-9a-zA-Z_$]*)/g},plugins:[],filters:{lower:function(e){return e.toLowerCase()},upper:function(e){return e.toUpperCase()},title:function(e){return e.replace(/\b[^\s-]*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}},decoders:{range:function(e){return parseInt(e.value)},number:function(e){return Number(e.value)},integer:function(e){return parseInt(e.value)},decimal:function(e){return parseFloat(e.value)},date:function(e){return new Date(e.value)},datetime:function(e){return new Date(e.value)},checkbox:function(e){return e.checked}},encoders:{date:function(e,t){e.value=t.toDateString()},datetime:function(e,t){e.value=t.toString()},checkbox:function(e,t){e.checked=w.Cord.convertToBool(t)}},decodeValue:function(e){var t=w.Cord.decoders[e.getAttribute("data-type")||e.getAttribute("type")];return t?t(e):e.value},encodeValue:function(e,t){var i=w.Cord.encoders[e.getAttribute("data-type")||e.getAttribute("type")];i?i(e,t):e.value=w.Cord.convertToString(t);var r=document.createEvent("HTMLEvents");r.initEvent("change",!0,!0),e.dispatchEvent(r)},mixins:{},copyObj:i,mixObj:l,mixProto:a,isPlainObj:t,getPrototypeValuesForKey:c,convertToString:function(e){return null===e||void 0===e?"":e.toString()},convertToBool:function(e){return!(!e||void 0!==e.length&&!e.length)},convertToNumber:function(e){return Number(e)||0},randomUID:function(){return(Math.floor(65536*(1+Math.random()))^Date.now()%65536).toString(16).substr(1)},randomGUID:function(){var e=this.randomUID;return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},randomCode:function(e){var t="";for(e=e||12;t.length<e;)t+=this.randomUID();return t.substr(0,e)},setImmediate:(e.requestAnimationFrame||e.setTimeout).bind(e),clearImmediate:(e.cancelAnimationFrame||e.clearTimeout).bind(e),ForceValue:function(e){this.value=e},View:_?w.View.extend({}):w.View,EmptyModel:new(w.Model.extend({set:function(){return this},toString:function(){return""}})),EmptyView:w.View.extend({tagName:"meta"}),EmptyCollection:new(w.Collection.extend({add:function(){return this},reset:function(){return this},set:function(){return this},toString:function(){return""}})),createElement:h,createSubview:u,createText:f,_sid:1,_pluginsChecked:!1,_callPlugins:d,_scopes:{},_callbacks:{tag:[],classes:[],attrs:[],children:[],bindings:[],complete:[],extend:[],create:[],initialize:[],remove:[],strings:[]}},"object"==typeof exports&&(module.exports=w.Cord),w.Cord.log=V?function(){for(var e=[],t=Array.prototype.slice.call(arguments),i=0;i<t.length;++i)e.push("object"==typeof t[i]?"%O":"%s");t.unshift(e.join(" | ")),console.log.apply(console,t)}:function(){},w.Cord.parseKeyPath=function(e){var t;return e=e.replace(/__/g,"."),t=e.split("."),1!==t.length&&w.Cord._scopes[t[0].toLowerCase()]?t[0]=t[0].toLowerCase():t.unshift("this"),t},w.Cord.hasId=function(e){return!!e.getAttribute("data-id")},w.Cord.getId=function(e){return e.getAttribute("data-id").split("-")[0]},w.Cord.setId=function(e,t,i){e.setAttribute("data-id",t+(i?"-"+i:""))},w.Cord.hasClass=function(e,t){return(e.getAttribute("class")||"").split(" ").indexOf(t)!==-1},w.Cord.addClass=function(e,t){Array.isArray(t)||(t=t.split(" "));for(var i=0;i<t.length;++i)w.Cord.hasClass(e,t[i])||e.setAttribute("class",((e.getAttribute("class")||"")+" "+t[i]).trim())},w.Cord.removeClass=function(e,t){var i,r=(e.getAttribute("class")||"").split(" ");for(Array.isArray(t)||(t=t.split(" ")),i=r.length-1;i>=0;--i)t.indexOf(r[i])!==-1&&r.splice(i,1);e.setAttribute("class",r.join(" "))},w.Cord.regex.replaceIdSelectors=function(e,t){return e.replace(this.idSelectorValues,'[data-id="$1'+(t?"-"+t:"")+'"]')},w.Cord.regex.testIdProperty=function(e,t){var i=this.idPropertyTest.test(e);if(!i&&!t)throw new Error('Invalid id "'+e+'" used');return i},Object.defineProperties(w.Cord.regex,{variable:g("variable"),conditional:g("conditional"),expression:g("expression")}),w.Cord.regex.variable={prefix:"{",suffix:"}"},w.Cord.regex.conditional={prefix:"(",suffix:")"},w.Cord.regex.expression={prefix:":=",suffix:"=:"},w.Cord.plugins._check=function(){var e,t,i,r={};for(e=0;e<this.length;++e)r[this[e].name]=!0;for(e=0;e<this.length;++e)if(i=this[e],i.requirements)for(t=0;t<i.requirements.length;++t)if(!r[i.requirements[t]])throw new Error('Backbone.Cord plugin "'+i.name+'" requires missing plugin "'+i.requirements[t]+'"')},w.Cord.plugins._register=function(e,t){if(e.config)for(var i in e.config)e.config.hasOwnProperty(i)&&!w.Cord.config.hasOwnProperty(i)&&(w.Cord.config[i]=e.config[i]);for(var r in w.Cord._callbacks)w.Cord._callbacks.hasOwnProperty(r)&&"function"==typeof e[r]&&t.call(w.Cord._callbacks[r],e[r]);return e.scope&&(w.Cord._scopes[e.scope.namespace.toLowerCase()]=e.scope),t.call(this,e)},w.Cord.plugins.unshift=function(e){return this._register(e,Array.prototype.unshift)},w.Cord.plugins.push=function(e){return this._register(e,Array.prototype.push)},w.Cord.View.prototype.createElement=h,w.Cord.View.prototype.createSubview=u,w.Cord.View.prototype.createText=f,w.Cord.View.prototype._callPlugins=d,w.Cord.View.prototype._createElement=h,w.Cord._scopes["this"]={observe:function(e){var t=Object.getOwnPropertyDescriptor(this,e);t&&(t.set._cordWrapped||(t.set?Object.defineProperty(this,e,{set:b(e,t.set)}):(this["_"+e]=this[e],delete this[e]&&Object.defineProperty(this,e,{get:this._synthesizeGetter(e),set:b(e),enumerable:!0,configurable:!0}))))},unobserve:function(e){if(!this._hasObservers("this",e)){var t=Object.getOwnPropertyDescriptor(this,e);if(t.set._prevSet)Object.defineProperty(this,e,{set:t.set._prevSet});else{var i=this[e];delete this[e],this[e]=i}}},getValue:function(e){return this[e]},setValue:function(e,t){this[e]=t}},w.Cord.View.prototype._synthesizeGetter=function(e){return e="_"+e,function(){return this[e]}},w.Cord.View.prototype._synthesizeSetter=function(e){return e="_"+e,function(t){this[e]=t}},w.Cord.View.prototype._synthesizeReadonlySetter=function(e){return e="_"+e,function(t){if("object"!=typeof t||Object.getPrototypeOf(t)!==w.Cord.ForceValue.prototype)throw new Error("Attempting to assign a readonly property.");this[e]=t.value}},w.Cord.View.prototype._synthesizeProperty=function(e,i){var r=null,o=!1,n={configurable:!0,enumerable:!0};"function"==typeof i?n.get=i:t(i)?(r=i.value,o=i.readonly,n.get=i.get,n.set=i.set):r=i,n.get=n.get||this._synthesizeGetter(e),n.set=null===n.set||o?this._synthesizeReadonlySetter(e):n.set||this._synthesizeSetter(e),Object.defineProperty(this,e,n),Object.defineProperty(this,"_"+e,{configurable:!1,enumerable:!1,value:r,writable:!0})},w.Cord.View.prototype._getObservers=function(e,t,i){var r;return e=e.toLowerCase(),r=this._observers[e],r||(r={},i&&(this._observers[e]=r)),t&&(r=r[t]?r[t]:i?r[t]=[]:[]),r},w.Cord.View.prototype._hasObservers=function(e,t){var i=this._getObservers(e,t);return Array.isArray(i)?!!i.length:!!Object.keys(i).length},w.Cord.View.prototype._addObserver=function(e,t,i){var r=this._getObservers(e,t,!0);r.push(i)},w.Cord.View.prototype._removeObserver=function(e,t,i){var r=this._getObservers(e);if(r[t]){var o=r[t].indexOf(i);o!==-1&&(r[t].splice(o,1),r[t].length||delete r[t])}},w.Cord.View.prototype._invokeObservers=function(e,t,i){w.Cord.log(e,t,i);var r,o=this._getObservers(e,t);for(r=0;r<o.length;++r)o[r].call(this,t,i);return this},w.Cord.View.prototype.observe=function(e,t,i){var r,o,n;if("string"==typeof t&&(t=this[t]||C(t)),"function"!=typeof t)return this;if("!"===e[0]&&(e=e.substr(1),t=v(t)),e.indexOf("|")!==-1){var s,l=[],a=e.split("|");for(e=a[0].trim(),s=1;s<a.length;++s)l.push(w.Cord.filters[a[s].trim()]||Math[a[s].trim()]);t=y(t,l)}return"%"===e[0]?(e=e.substr(1),w.Cord.setImmediate(function(){t.call(this,null,this.getValueForKey.call(this,e))}.bind(this)),this):(r=w.Cord.parseKeyPath(e),o=r[0],e=r[1],n=w.Cord._scopes[o],r.length>2&&(t=m(t,r.slice(2))),n.observe.call(this,e,t,i),this._addObserver(o,e,t),i&&w.Cord.setImmediate(function(){t.call(this,e,n.getValue.call(this,e))}.bind(this)),this)},w.Cord.View.prototype.unobserve=function(e,t){var i,r,o;return"string"==typeof t&&(t=this[t]),t?(i=w.Cord.parseKeyPath(e),r=i[0],e=i[1],o=w.Cord._scopes[r],this._removeObserver(r,e,t),o.unobserve.call(this,e,t),this):this},w.Cord.View.prototype.getValueForKey=function(e){var t,i,o;return t=w.Cord.parseKeyPath(e),i=w.Cord._scopes[t[0]],o=i.getValue.call(this,t[1]),t.length>2&&(o=r(o,t.slice(2))),o},w.Cord.View.prototype.setValueForKey=function(e,t){var i,r;return i=w.Cord.parseKeyPath(e),r=w.Cord._scopes[i[0]],i.length>2?o(r.getValue.call(this,i[1]),i.slice(2),t):r.setValue.call(this,i[1],t),this},w.Cord.View.prototype.setValuesForKeys=function(e){var i,r;if(t(e))for(r in e)e.hasOwnProperty(r)&&this.setValueForKey(r,e[r]);else for(i=0;i+1<arguments.length;i+=2)this.setValueForKey(arguments[i],arguments[i+1]);return this},w.Cord.View.prototype.getChildById=function(e){return this.el.querySelector('[data-id="'+e+"-"+this.vuid+'"]')},w.Cord.View.prototype.getSubviewById=function(e){var t=this.getChildById(e);if(t)return this.subviews[t.getAttribute("data-sid")]},w.Cord._scopes.model={observe:function(e,t){"id"===e&&this._addObserver("model",this.model.idAttribute,t)},unobserve:function(e,t){"id"===e&&this._removeObserver("model",this.model.idAttribute,t)},getValue:function(e){return"id"===e?this.model.id:this.model.get(e)},setValue:function(e,t){"id"===e&&(e=this.model.idAttribute),this.model.set(e,t)}},w.Cord.View.prototype._modelObserver=function(e,t){var i,r=t._changed||e.changedAttributes();if(r)for(i in r)r.hasOwnProperty(i)&&this._invokeObservers("model",i,r[i])},w.Cord.View.prototype.model=w.Cord.EmptyModel,w.Cord.View.prototype.setModel=function(e,t){var i,r,o,n;if(this.model===e)return this;if(e||(e=w.Cord.EmptyModel),!(e instanceof w.Model))throw new Error("Attempting to assign a non-Backbone.Model to View.model.");if(r=this.model,this.model=e,this.stopListening(r),this.listenTo(this.model,"change",this._modelObserver),n=this._getObservers("model"),Object.keys(n).length)if(this.model===w.Cord.EmptyModel)for(i in n)n.hasOwnProperty(i)&&this._invokeObservers("model",i,void 0);else this._modelObserver(this.model,{_changed:r.changedAttributes(this.model.attributes)});if(!t)for(i in this.subviews)if(this.subviews.hasOwnProperty(i)){if(o=this.subviews[i],!(o instanceof w.Cord.View))continue;if(o.cascade&&o.cascade(e)===!1)continue;o.model!==r||o.collection||o.setModel(e)}return this},w.Cord.View.prototype.setCollection=function(e){if(this.collection===e)return this;if(e||(e=w.Cord.EmptyCollection),!(e instanceof w.Collection))throw new Error("Attempting to assign a non-Backbone.Collection to View.collection.");return this.stopListening(this.collection),this.collection=e,this};var O=w.Cord.View.extend;w.Cord.View.extend=function(e,t){e=e||{},t=t||{},e.vuid=e.vuid||w.Cord.randomUID(),d.call(this,"extend",{protoProps:e,staticProps:t});var i,r,o=e.events;if(o)for(i in o)o.hasOwnProperty(i)&&i.indexOf("#")!==-1&&(r=o[i],delete o[i],i=w.Cord.regex.replaceIdSelectors(i,e.vuid),o[i]=r);return this.prototype.events&&e.events&&(e.events=l(this.prototype.events,e.events)),this.prototype.properties&&e.properties&&(e.properties=l(this.prototype.properties,e.properties)),this.prototype.observers&&e.observers&&(e.observers=l(this.prototype.observers,e.observers)),O.call(this,e,t)};var x=w.Cord.View.prototype._ensureElement;w.Cord.View.prototype._ensureElement=function(){w.Cord._pluginsChecked||(w.Cord.plugins._check(),w.Cord._pluginsChecked=!0);var e=Object.getPrototypeOf(this);"function"==typeof e.collection?this.collection=new e.collection:"function"==typeof e.model&&(this.model=new e.model),this.subviews={},this._observers={},this._callPlugins("create",{});var t;if(this.properties){var i=this.properties;for(t in i)i.hasOwnProperty(t)&&this._synthesizeProperty(t,i[t])}var r="function"==typeof this.el;r&&(this.el=this.el.bind(this,this.createElement.bind(this),this.createSubview.bind(this))),this.model!==w.Cord.EmptyModel&&this.listenTo(this.model,"change",this._modelObserver);var o=x.apply(this,arguments);if(w.Cord.addClass(this.el,c(this,"className").join(" ")),this.el.setAttribute("data-vuid",this.vuid),this._callPlugins("initialize",{}),this.observers){var n=this.observers;for(t in n)n.hasOwnProperty(t)&&this.observe(t,n[t],!0)}return o};var P=w.Cord.View.prototype.remove;w.Cord.View.prototype.remove=function(){var e;this._callPlugins("remove",{});for(e in this.subviews)this.subviews.hasOwnProperty(e)&&this.subviews[e].remove();return this.subviews=null,this._observers=null,this.trigger("remove",this),P.apply(this,arguments)}}("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global),function(e){"use strict";function t(t,i){return s[i]?function(r,o){"innerHTML"!==i?e.Cord.encodeValue(t,o):t[i]=e.Cord.convertToString(o)}:function(r,o){t.setAttribute(i,e.Cord.convertToString(o))}}function i(t){return function(i,r){t.textContent=e.Cord.convertToString(r)}}function r(e){var t=e.getAttribute(l);return t&&t===a?(a=null,!0):(a=t,!1)}function o(t){return function(i,o){r(t)||e.Cord.encodeValue(t,o)}}function n(t,i){return function(){r(t)||this.setValueForKey(i,e.Cord.decodeValue(t))}}var s={innerHTML:!0,value:!0,checked:!0},l="data-binding",a=null;e.Cord.plugins.push({name:"binding",requirements:["interpolation"],attrs:function(i,r){var s,a,c;if(i.isView){for(var d in r)r.hasOwnProperty(d)&&(s=r[d],"string"==typeof s&&s.match(e.Cord.regex.variableSearch)&&(this.observeFormat(s,t(i.el,d),!0),delete r[d]));r.innerHTML&&(this.observe(r.innerHTML,t(i.el,"innerHTML"),!0),delete r.innerHTML),r.bind&&(r.observe=r.bind,r.change=r.bind,delete r.bind),r.observe&&(r.observe!==r.change&&r.observe!==r.input||(c=!0,r[l]="binding-"+e.Cord.randomUID()),this.observe(r.observe,o(i.el),!0),delete r.observe),r.change&&(a=n(i.el,r.change).bind(this),i.el.addEventListener("change",a),delete r.change),r.input&&(a=n(i.el,r.input).bind(this),i.el.addEventListener("input",a),delete r.input),a&&!c&&e.Cord.setImmediate(a)}},children:function(t,r){var o,n,s,l,a,c,d;if(t.isView)for(o=r.length-1;o>=0;--o)if(s=r[o],"string"==typeof s&&(l=s.split(e.Cord.regex.variableSearch),l.length>1)){for(c=[o,1],a=s.match(e.Cord.regex.variableSearch),n=0;n<a.length;++n)l[n].length&&c.push(document.createTextNode(l[n])),d=document.createTextNode(""),this.observe(e.Cord.regex.variableValue.exec(a[n])[1],i(d),!0),c.push(d);l[n].length&&c.push(document.createTextNode(l[n])),Array.prototype.splice.apply(r,c)}}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(t,i){return function(r,o){var n=e.Cord.convertToBool(o);n?e.Cord.addClass(t,i):e.Cord.removeClass(t,i)}}function i(t){var i="";return function(r,o){e.Cord.removeClass(t,i),i=e.Cord.convertToString(o),e.Cord.addClass(t,i)}}e.Cord.plugins.push({name:"classes",requirements:["interpolation"],classes:function(r,o){var n;if(r.isView)for(var s=o.length-1;s>=0;--s)if(n=o[s].match(e.Cord.regex.conditionalValue)){var l=r.el,a=o[s].substr(0,n.index),c=n[1];this.observe(c,t(l,a),!0),o.splice(s,1)}else o[s].search(e.Cord.regex.variableSearch)!==-1&&(this.observeFormat(o[s],i(r.el),!0),o.splice(s,1))}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";e.Cord.mixins.collection={collection:e.Cord.EmptyCollection,properties:{length:{readonly:!0,value:0},start:function(e,t,i){var r=0;return t>0&&(r=t),r>e&&(r=e),i||(r=0),r},end:function(e,t,i,r){var o=t-1;return r>0&&(o=e+r-1),o>=t&&(o=t-1),r||(o=-1),o},more:function(e,t){return t-(e+1)},pageStart:{set:function(e){this._pageStart=e,this._onResetCollection()},value:0},pageLength:{set:function(e){this._pageLength=e,this._onResetCollection()},value:-1},selected:{set:function(e){var t;this._selected!==e&&(this._selected=e,this.setModel(e),this.trigger("select",e),t=this.itemViews._selected,t&&(t.selected=!1),e?(t=this.itemViews[e.cid],this.itemViews._selected=t,t.selected=!0):delete this.itemViews._selected)},value:null}},initialize:function(){this.setCollection(this.collection,!0)},remove:function(){this._removeAllItems()},setCollection:function(t,i){(this.collection!==t||i)&&(t&&(this.listenTo(t,"add",this._onAddItem),this.listenTo(t,"remove",this._onRemoveItem),this.listenTo(t,"sort",this._onSortCollection),this.listenTo(t,"reset",this._onResetCollection)),e.Cord.setImmediate(this._onResetCollection.bind(this)))},getCollectionContainer:function(){return this.getChildById(e.Cord.config.collectionContainerId)||this.el},createItemView:function(e){var t=new this.itemView({model:e});if(t.sid)throw new Error("Item views cannot be passed or created through the subview() method.");return this.listenTo(t,"select",function(e){this.selected=e.model}),this.listenTo(t,"remove",function(e){this.collection.remove(e.model,{viewRemoved:!0})}),this.itemViews[t.model.cid]=t,t},getItemView:function(e){var t,i;if(i=e.cid,"number"==typeof e){var r=this.collection.at(e);r&&(i=r.cid)}else if(e.nodeType===Node.ELEMENT_NODE)for(t in this.itemViews)if(this.itemViews.hasOwnProperty(t)&&this.itemViews[t].el===e){i=t;break}return i?this.itemViews[i]:void 0},_removeAllItems:function(){var e,t;if(this.itemViews){delete this.itemViews._first,delete this.itemViews._selected;for(e in this.itemViews)this.itemViews.hasOwnProperty(e)&&(t=this.itemViews[e],this.stopListening(t),t.remove())}this.itemViews={},this.selected=null},_onAddItem:function(t,i,r){var o,n,s,l;this.length=new e.Cord.ForceValue(i.length),n=this.getCollectionContainer(),n&&(l=void 0===r.index?this._length-1:r.index,l<this._start||l>this._end||(l-=this._start,this._end-this._start+1===this._pageLength&&n.removeChild(n.lastChild),o=this.createItemView(t),l===this._end?n.appendChild(o.el):(s=this.itemViews[i.at(this._start+l+1).cid].el,s.parentNode.insertBefore(o.el,s)),0===l&&(this.itemViews._first=o)))},_onRemoveItem:function(t,i,r){var o,n,s=this._more;this.length=new e.Cord.ForceValue(i.length),n=this.getCollectionContainer(),n&&(this._selected===t&&(this.selected=null),o=this.itemViews[t.cid],o&&(delete this.itemViews[t.cid],this.stopListening(o),r.viewRemoved||o.remove(),r.index>=this._start&&r.index<=this._end&&s&&(o=this.createItemView(i.at(this._end)),n.appendChild(o.el)),i.length?this.itemViews._first=this.itemViews[i.at(this._start).cid]:delete this.itemViews._first))},_onSortCollection:function(){var e,t,i,r,o,n;if(n=this.getCollectionContainer(),n&&this._length)if(0===this._start&&this._end===this._length-1){for(o=this.itemViews._first.el,e=0;e<this._length;++e)i=this.collection.at(e),r=this.itemViews[i.cid],n.insertBefore(r.el,o),o=r.el.nextSibling;this.itemViews._first=this.itemViews[this.collection.at(0).cid]}else{var s={},l=Object.keys(this.itemViews);for(e=0;e<l.length;++e)s[l[e]]=!0;for(s._first=!1,s._selected=!1,e=this._start;e<=this._end;++e)t=this.collection.at(e).cid,this.itemViews[t]?s[t]=!1:this.itemViews[t]=this.createItemView(this.collection.at(e));for(t in s)s.hasOwnProperty(t)&&s[t]&&(r=this.itemViews[t],this._selected===r.model&&(this.selected=null),delete this.itemViews[t],this.stopListening(r),r.remove());for(e=this._start;e<=this._end;++e)r=this.itemViews[this.collection.at(e).cid],n.appendChild(r.el);this.itemViews._first=this.itemViews[this.collection.at(this._start).cid]}},_onResetCollection:function(){var t,i,r,o;if(this._removeAllItems(),this.length=new e.Cord.ForceValue(this.collection.length),o=this.getCollectionContainer(),o&&this._length){for(r=document.createDocumentFragment(),t=this._start;t<=this._end;++t)i=this.createItemView(this.collection.at(t)),t===this._start&&(this.itemViews._first=i),r.appendChild(i.el);o.appendChild(r)}}},e.Cord.plugins.push({name:"collection",requirements:["computed"],config:{collectionContainerId:"container"}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(e){var t=e.toString(),i=t.slice(t.indexOf("(")+1,t.indexOf(")")).match(/([^\s,]+)/g);return i||(i=[]),i}function i(){var t,i,r,o,n=this.changedAttributes(),s={};for(o in n)if(n.hasOwnProperty(o)&&this._computedArgs[o])for(r=this._computedArgs[o],t=0;t<r.length;++t)i=r[t],s[i]||(s[i]=this.get(i),this.trigger("change:"+i,this,s[i],{}));e.Cord.setImmediate(function(){this.changed=s,this.trigger("change",this,{})}.bind(this),0)}function r(e,t){return function(){var i,r=[];for(i=0;i<t.length;++i)r.push(this.get(t[i]));return e.apply(this,r)}}function o(t,i,r){return function(){var o,n=[];for(o=0;o<r.length;++o)n.push(this.getValueForKey(r[o]));this[t]=new e.Cord.ForceValue(i.apply(this,n))}}e.Model.prototype._addComputed=function(e,o){var n,s,l,a=t(o);for(this._computed||(this._computed={},this._computedArgs={},n=this.get,this.get=function(e){var t=this._computed[e];return t?t.call(this):n.call(this,e)},this.listenTo(this,"change",i)),this._computed[e]=r(o,a),s=0;s<a.length;++s)l=a[s],this._computedArgs[l]||(this._computedArgs[l]=[]),this._computedArgs[l].push(e)};var n=e.Model.extend;e.Model.extend=function(t){var i;return t.computed&&(i=t.initialize||e.Model.prototype.initialize,t.initialize=function(){if(this.computed)for(var e in this.computed)this.computed.hasOwnProperty(e)&&this._addComputed(e,this.computed[e]);return i.apply(this,arguments)}),n.apply(this,arguments)},e.Cord.plugins.push({name:"computed",extend:function(i){var r,o,n;if(r=i.protoProps.properties)for(o in r)r.hasOwnProperty(o)&&(n=r[o],"function"==typeof n&&t(n).length?r[o]={get:n,readonly:!0}:e.Cord.isPlainObj(n)&&n.get&&t(n.get).length&&(n.readonly=!0))},initialize:function(){if(this.properties){var e,i,r,n,s;for(e in this.properties)if(this.properties.hasOwnProperty(e)&&(i=Object.getOwnPropertyDescriptor(this,e),i&&i.get&&(r=t(i.get),r.length))){for(s=o(e,i.get,r),n=0;n<r.length;++n)this.observe(r[n],s,0===n);Object.defineProperty(this,e,{get:this._synthesizeGetter(e)})}}}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(e){return function(t){e.apply(this,arguments)===!1&&(t.preventDefault(),t.stopPropagation())}}function i(e,i){for(var r in i)if("on"===r.substr(0,2)&&i.hasOwnProperty(r)){var o="string"==typeof i[r]?this[i[r]]:i[r];"function"==typeof o&&(e.isView&&(o=o.bind(this)),e.el.addEventListener(r.substr(2),t(o))),delete i[r]}}e.Cord.View.prototype.focus=function(e){var t=e?this.getChildById(e):this.el;t.getAttribute("tabindex")||(t.setAttribute("tabindex",-1),t.style.outline="none"),t.focus()},e.Cord.plugins.push({name:"events",attrs:i,bindings:i})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(t){var i=null;return function(r,o){var n=e.Cord.convertToBool(o);null===i&&(i=t.style.display),t.style.display=n?"none":i}}function i(t){return function(i,r){t.style.visibility=e.Cord.convertToBool(r)?"hidden":"visible"}}function r(e,r){e.isView&&(r.hidden&&(this.observe(r.hidden,t(e.el),!0),delete r.hidden),r.invisible&&(this.observe(r.invisible,i(e.el),!0),delete r.invisible))}e.Cord.plugins.push({name:"hidden",attrs:r,bindings:r})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(e,t,i){return function(r){var o,n,s=[];for(o=0;o<t.length;++o)s.push(e[o]),n=t[o],s.push(this.getValueForKey(n));s.push(e[o]),i.call(this,r,s.join(""))}}e.Cord.View.prototype.observeFormat=function(i,r,o){var n=i.split(e.Cord.regex.variableSearch),s=i.match(e.Cord.regex.variableSearch);if(s)if(1===s.length&&s[0]===i)this.observe(e.Cord.regex.variableValue.exec(s[0])[1],r,o);else{var l,a={};for(l=0;l<s.length;++l)s[l]=e.Cord.regex.variableValue.exec(s[l])[1];for(l=0;l<s.length;++l)a[s[l]]||(this.observe(s[l],t(n,s,r),o),a[s[l]]=!0,o=!1)}},e.Cord.plugins.push({name:"interpolation"})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(t,i){var r,o,n=t.split(e.Cord.regex.variableSearch),s=t.match(e.Cord.regex.variableSearch),l="this."+i+" = ";for(r=0;r<s.length;++r)l+=n[r],o=s[r]=e.Cord.regex.variableValue.exec(s[r])[1],l+='(Number(this.getValueForKey("'+o+'")) || 0)';l+=n[r]+";";var a=new Function(l);for(r=0;r<s.length;++r)o=s[r],this.observe(o,a,!r);this._synthesizeProperty(i),Object.defineProperty(this,i,{enumerable:!1})}function i(i){var r,o,n,s,l=i.split(e.Cord.regex.expressionSearch),a=i.match(e.Cord.regex.expressionSearch);if(!a)return i;for(r=0;r<a.length;++r)o=e.Cord.regex.expressionValue.exec(a[r])[1],n="expr"+e.Cord.randomUID(),a[r]=e.Cord.regex.variable.prefix+n+e.Cord.regex.variable.suffix,t.call(this,o,n);for(s="",r=0;r<a.length;++r)s+=l[r],s+=a[r];return s+=l[r]}e.Cord.plugins.unshift({name:"math",attrs:function(t,r){if(t.isView)for(var o in r)r.hasOwnProperty(o)&&"string"==typeof r[o]&&r[o].search(e.Cord.regex.expressionSearch)!==-1&&(r[o]=i.call(this,r[o]))},children:function(t,r){if(t.isView)for(var o=0;o<r.length;++o)"string"==typeof r[o]&&r[o].search(e.Cord.regex.expressionSearch)!==-1&&(r[o]=i.call(this,r[o]))},strings:function(t,r){for(var o in r)r.hasOwnProperty(o)&&"string"==typeof r[o]&&r[o].search(e.Cord.regex.expressionSearch)!==-1&&(r[o]=i.call(this,r[o]))}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";e.Model.prototype.track=function(t,i,r){if("function"==typeof i&&(r=i,i=null),r=r||function(e){return e},i){var o=function(t){return function(i,o,n){var s={};s[t]=o,n._track||(n=e.Cord.copyObj(n),n._track=!0,this.set(r(s),n))}};"string"==typeof i&&(i=[i]);for(var n=0;n<i.length;++n)this.listenTo(t,"change:"+i[n],o(i[n]))}else this.listenTo(t,"change",function(t,i){i._track||(i=e.Cord.copyObj(i),i._track=!0,this.set(r(t.attributes),i))});return this},e.Model.prototype.subsume=function(e,t,i){var r=new e;return"function"==typeof t&&(i=t,t=null),i=i||r.transform||function(e){return e},r.listenTo(this,"request sync error",function(){this.trigger.apply(this,arguments)}),t?(Object.keys(this.get(t)).length&&r.set(i(r.parse(this.get(t)))),
r.track(this,t,function(e){return e[t]}),this.track(r,function(e){var i={};return i[t]=e,i})):(Object.keys(this.attributes).length&&r.set(i(r.parse(this.attributes))),r.track(this,i)),r},e.Model.prototype.mirror=function(e,t){return this.track(e,t),e.track(this,t),this},e.Cord.plugins.push({name:"modeltracking"})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(){return this.getChildById(e.Cord.config.renderContainerId)||this.el}function i(){var e=this.createSubview.apply(this,arguments);return this._renderedSubviews.push(e),e}function r(t){var i;return function(){i||(i=e.Cord.setImmediate(t))}}e.Cord.plugins.push({name:"render",config:{renderContainerId:"container"},initialize:function(){if(this.render!==e.View.prototype.render){var o=this.render.bind(this,this.createElement.bind(this),i.bind(this));this.render=function(){var i,n,s,l,a,c=t.call(this);for(i=0;i<this._rendered.length;++i)s=this._rendered[i],s instanceof e.View||c.removeChild(s);for(this._rendered=null,i=0;i<this._renderedSubviews.length;++i)this._renderedSubviews[i].remove();this._renderedSubviews=[];for(n in this._renderedObservers)this._renderedObservers.hasOwnProperty(n)&&this.unobserve(n,this._renderedObservers[n]);for(this._renderedObservers={},arguments.length&&(this._renderedArgs=Array.prototype.slice.call(arguments)),l=r(this.render.bind(this)),this.observe=function(t,i){e.Cord.View.prototype.observe.call(this,"%"+t,i),this._renderedObservers[t]||e.Cord.View.prototype.observe.call(this,t,this._renderedObservers[t]=l)},this._rendered=o.apply(this,this._renderedArgs)||[],this._rendered instanceof Array||(this._rendered=[this._rendered]),delete this.observe,a=document.createDocumentFragment(),i=0;i<this._rendered.length;++i)s=this._rendered[i],s instanceof e.View?a.appendChild(s.el):a.appendChild(s);return c.appendChild(a),this.trigger("render",this),this},this._rendered=[],this._renderedArgs=[],this._renderedSubviews=[],this._renderedObservers={}}}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(e){return e.split(" ")[0].split("[")[0].split(".")[0].split("#")[0].toLowerCase()}function i(e,r){if("object"!=typeof e){var n=t(e);o[n]||(o[n]=[]),o[n].push({selector:e,func:r})}else{var s=e;for(e in s)s.hasOwnProperty(e)&&i(e,s[e])}}function r(e){var i,r,o,n={};for(i in e)e.hasOwnProperty(i)&&(r=t(i),o=e[i],n[r]||(n[r]=[]),n[r].push({selector:i,func:o}));return n}var o={};e.Cord.Replacements={add:i,compile:r},e.Cord.plugins.push({name:"replacement",config:{noReplaceAttribute:"noreplace"},complete:function(t){var i,r,n,s,l,a,c,d;if(!t.subview){if(i=t.el,i.hasAttribute(e.Cord.config.noReplaceAttribute))return void i.removeAttribute(e.Cord.config.noReplaceAttribute);if(n=i.tagName.toLowerCase(),l=o[n],s=this.replacements&&this.replacements[n],l=s&&l?s.concat(l):l||s)for(c=document.createDocumentFragment(),c.appendChild(i),r=0;r<l.length;++r)if(a=l[r],c.querySelector(a.selector)===i)return d=a.func.call(this,i,c)||c,d.nodetype!==Node.DOCUMENT_FRAGMENT_NODE&&e.Cord.hasId(i)&&e.Cord.setId(d,e.Cord.getId(i),this.vuid),d}}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(e){var t,i=e.changedAttributes();if(i)for(t in i)i.hasOwnProperty(t)&&this._invokeObservers("shared",t,i[t])}e.Cord.SharedScope={model:new e.Model},e.Cord.plugins.push({name:"sharedscope",scope:{namespace:"shared",observe:function(){this._hasObservers("shared")||this.listenTo(e.Cord.SharedScope.model,"change",t)},unobserve:function(){this._hasObservers("shared")||this.stopListening(e.Cord.SharedScope.model,"change",t)},getValue:function(t){return e.Cord.SharedScope.model.get(t)},setValue:function(t,i){e.Cord.SharedScope.model.set(t,i)}}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(){var t,i,r=e.Cord.Styles.mediaQueries;e.Cord._styleSheets={};for(i in r)r.hasOwnProperty(i)&&(t=document.createElement("style"),t.type="text/css",r[i]&&(t.media=r[i]),t.appendChild(document.createTextNode("")),document.head.appendChild(t),e.Cord._styleSheets[i]=t.sheet)}function i(e,t){return void 0===document.documentElement.style[e]?t?m:y:""}function r(e){var t=i(e);return t?t+e[0].toUpperCase()+e.substr(1):e}function o(e){var t=e.toLowerCase();return!v||Element.prototype.hasOwnProperty("on"+t)?t:v+e}function n(e){var t,i,r=0,o=[];for(t=0;t<e.length;++t)i=e.charCodeAt(t),i>=65&&i<=90&&t&&(o.push(e.substring(r,t).toLowerCase()),r=t);return o.push(e.substring(r,t).toLowerCase()),o.join("-")}function s(t,r,o,l,a,c){var d,h,u,f,g,b;a=a||"all",h=e.Cord._styleSheets[a];for(d in r)if(r.hasOwnProperty(d))if("object"==typeof r[d]){if(f=g=null,b=">",u=d,0===u.indexOf(e.Cord.config.mediaQueryPrefix)&&(f=u.substr(e.Cord.config.mediaQueryPrefix.length),!e.Cord.Styles.mediaQueries[f]))return;f||(":+~>".indexOf(u[0])!==-1?(b=u[0],u=u.substr(1)):0===u.indexOf(e.Cord.config.allSelectorPrefix)?(b=" ",u=u.substr(e.Cord.config.allSelectorPrefix.length)):0===u.indexOf(e.Cord.config.parentSelectorPrefix)&&(b="",u=u.substr(e.Cord.config.parentSelectorPrefix.length)),"#"===u[0]&&(g=u.substr(1)),g&&!e.Cord.regex.testIdProperty(g,!0)&&(g=null)),f?s(t,r[d],o,l,f):g?s(t,r[d],o,l+b+e.Cord.regex.replaceIdSelectors("#"+g,t),a,g):s(t,r[d],o,l+b+e.Cord.regex.replaceIdSelectors(u,t),a)}else{var y=r[d].toString();if(y.search(e.Cord.regex.variableSearch)!==-1){var v=c||p;o[v]||(o[v]={}),o[v][d]=y}else{var m=l+"{"+i(d,!0)+n(d)+":"+y+";}";e.Cord.log("@"+a,m),h.insertRule(m,h.cssRules.length)}}}function l(t,r){var o,s,l,a,c,d,h,u,f,p=e.Cord._styleSheets.animations;for(o in r)if(r.hasOwnProperty(o)){if(s=r[o],Array.isArray(s)){for(1===s.length&&s.unshift({}),a=s,s={},c=100/(a.length-1),d=0;d<a.length;++d)s[Math.ceil(c*d)+"%"]=a[d];r[o]=s}if(e.Cord.isPlainObj(s)){if(s.name)continue;h="";for(l in s)if(s.hasOwnProperty(l)&&"options"!==l&&"aliases"!==l){h+=l+"{",f=s[l];for(u in f)f.hasOwnProperty(u)&&(h+=i(u,!0)+n(u)+":"+f[u]+";");h+="}"}t?s.name=o+"-"+t:s.name=o,h=C+s.name+"{"+h+"}",e.Cord.log(h),p.insertRule(h,p.cssRules.length)}}}function a(t,i){return i=r(i),function(r,o){t.style[i]=e.Cord.convertToString(o)}}function c(t,i){var o=i.style;if(o&&("string"==typeof o&&t.isView&&this[o]&&(o=this[o]),"object"==typeof o)){this._callPlugins("strings",t,o);for(var n in o)o.hasOwnProperty(n)&&(o[n].match(e.Cord.regex.variableSearch)&&t.isView?this.observeFormat(o[n],a(t.el,n),!0):t.el.style[r(n)]=o[n]);delete i.style}}function d(t,i){var r,o,n,s,l,a=t.split(/: */);for(a.length>1?(s=a[1].split(/, */),l=this.el.querySelectorAll(e.Cord.regex.replaceIdSelectors(a[0].trim(),this.vuid))):(s=a[0].split(/, */),l=[this.el]),r=0;r<s.length;++r)o=s[r],n=this.animations[o]||e.Cord.Styles.animations[o]||{name:o},s[r]=n.name,n.options&&(i=e.Cord.mixObj(n.options,i));return{animations:s,elements:l,options:i}}function h(e,t){for(var i=e.split(/, */),r=[],o=0;o<i.length;++o)t.indexOf(i[o])!==-1&&r.push(o);return r.length===i.length||r}function u(e,t){return t===!0?"":e.split(/, */).filter(function(e,i){return t.indexOf(i)===-1}).join(",")}function f(e,t,i){var r,o=e.split(/, */);if(t===!0)for(r=0;r<o.length;++r)o[r]=i;else for(r=0;r<t.length;++r)o[t[r]]=i;return o.join(",")}var p="(this)",g=navigator.userAgent.toLowerCase(),b=(/(chrome|safari)/.exec(g)||/firefox/.exec(g)||/msie/.exec(g)||/trident/.exec(g)||/opera/.exec(g)||"")[0],y={chrome:"webkit",firefox:"Moz",msie:"ms",opera:"O",safari:"webkit",trident:"ms"}[b]||"",v={chrome:"webkit",opera:"webkit",safari:"webkit"}[b]||"",m="-"+y.toLowerCase()+"-",C="@"+i("animationName",!0)+"keyframes ",w={duration:"250ms",delay:"0",timing:"ease",count:"1",direction:"normal",fill:"none",state:"running",interactive:!0},_=r("animationName"),V=r("animationDelay"),O=r("animationDirection"),x=r("animationDuration"),P=r("animationIterationCount"),S=r("animationTimingFunction"),A=r("animationFillMode"),j=r("animationPlayState"),k=r("transitionDelay"),I=r("transitionDuration"),E=r("transitionProperty"),T=r("transitionTimingFunction"),L=o("AnimationIteration"),M=o("AnimationEnd"),F=o("TransitionEnd");e.Cord.View.prototype.beginAnimation=function(t,i,r){var o,n,s,l,a,c,h,u,f,p,g,b;if(i&&"function"!=typeof i||(r=i,i={}),Array.isArray(t)){for(h=1;h<t;++h)this.beginAnimation(t[h],i);t=t[0]}if(o=d.call(this,t,i),n=o.animations,a=o.elements,!a.length)return this;for(i=e.Cord.mixObj(w,o.options),l=i.interactive?"":"none",h=0;h<a.length;++h)for(c=a[h],s=c.style[_]?",":"",u=0;u<n.length;++u)c.style[V]+=s+i.delay,c.style[O]+=s+i.direction,c.style[x]+=s+i.duration,c.style[P]+=s+i.count,c.style[S]+=s+i.timing,c.style[A]+=s+i.fill,c.style[j]+=s+i.state,c.style[_]+=s+n[u],c.style.pointerEvents=l,s=",";return parseInt(i.count)>1&&r&&(f=0,p=function(e){e.target===e.currentTarget&&(f+=1,r.call(this,f,t,i)===!1&&this.pauseAnimation(t))}.bind(this),a[0].addEventListener(L,p)),g="infinite"!==i.count&&"none"===i.fill,b=function(e){e.target===e.currentTarget&&(p&&e.target.removeEventListener(L,p),e.target.removeEventListener(M,b),g&&this.cancelAnimation(t),r&&r.call(this,-1,t,i))}.bind(this),a[0].addEventListener(M,b),this},e.Cord.View.prototype._updateAnimation=function(e,t,i){var r,o,n,s,l,a,c;if(r=d.call(this,e),o=r.animations,n=r.elements,!n.length)return this;for(l=0;l<n.length;++l)s=n[l],s.style[_]!==a&&(a=s.style[_],c=h(s.style[_],o)),s.style[t]=f(s.style[t],c,i);return this},e.Cord.View.prototype.pauseAnimation=function(e){return this._updateAnimation(e,j,"paused")},e.Cord.View.prototype.resumeAnimation=function(e){return this._updateAnimation(e,j,"running")},e.Cord.View.prototype.cancelAnimation=function(e){var t,i,r,o,n,s,l;if(t=d.call(this,e),i=t.animations,r=t.elements,!r.length)return this;for(n=0;n<r.length;++n)o=r[n],o.style[_]!==s&&(s=o.style[_],l=h(o.style[_],i)),o.style[V]=u(o.style[V],l),o.style[O]=u(o.style[O],l),o.style[x]=u(o.style[x],l),o.style[P]=u(o.style[P],l),o.style[S]=u(o.style[S],l),o.style[A]=u(o.style[A],l),o.style[j]=u(o.style[j],l),o.style[_]=u(o.style[_],l),o.style.pointerEvents="";return this},e.Cord.View.prototype.beginTransition=function(t,o,s,l){var a,c,d,f,p,g;if(e.Cord.isPlainObj(t)&&(l=s,s=o,o=t,t=null),"function"==typeof s&&(l=s,s={}),s=e.Cord.mixObj(w,s),a=t?this.el.querySelectorAll(e.Cord.regex.replaceIdSelectors(t,this.vuid)):[this.el],!a.length)return this;for(c=0;c<a.length;++c){d=a[c],f=d.style[E]?",":"";for(p in o)o.hasOwnProperty(p)&&(d.style[k]+=f+s.delay,d.style[I]+=f+s.duration,d.style[E]+=f+i(p,!0)+n(p),d.style[T]+=f+s.timing,d.style[r(p)]=o[p],f=",")}return g=function(e){var r,c,d,f,p;if(e.target===e.currentTarget){for(e.target.removeEventListener(F,g),d=Object.keys(o).map(function(e){return i(e,!0)+n(e)}),r=0;r<a.length;++r)c=a[r],c.style[E]!==f&&(f=c.style[E],p=h(c.style[E],d)),c.style[k]=u(c.style[k],p),c.style[I]=u(c.style[I],p),c.style[E]=u(c.style[E],p),c.style[T]=u(c.style[T],p);l&&l.call(this,t,o,s)}}.bind(this),a[0].addEventListener(F,g),this},e.Cord.View.prototype.applyStyles=function(t,i){var o,n,s,l;if(e.Cord.isPlainObj(t)&&(i=t,t=null),o=t?this.el.querySelectorAll(e.Cord.regex.replaceIdSelectors(t,this.vuid)):[this.el],!o.length)return this;for(n=0;n<o.length;++n){s=o[n];for(l in i)i.hasOwnProperty(l)&&(s.style[r(l)]=i[l])}return this},e.Cord.View.prototype.clearStyles=function(t,i){e.Cord.isPlainObj(t)&&(i=t,t=null),i=e.Cord.copyObj(i);for(var r in i)i.hasOwnProperty(r)&&(i[r]="");return this.applyStyles(t,i),this};var B={"0%":"from",from:"0%","100%":"to",to:"100%"};e.Cord.View.prototype.getKeyframe=function(t,i,r){var o,n,s;t=this.animations[t]||e.Cord.Styles.animations[t],i=i||"0%",o=t.aliases||{},s=t[i]||t[B[i]||o[i]],s=e.Cord.copyObj(s);for(n in s)0===n.indexOf("animation")&&s.hasOwnProperty(n)&&delete s[n];if(r)for(n in s)s.hasOwnProperty(n)&&(s[n]="");return s},e.Cord.View.prototype.beginKeyframeTransition=function(t,i,r,o,n){var s;if((this.animations[t]||e.Cord.Styles.animations[t])&&(n=o,o=r,r=i,i=t,t=null),"string"!=typeof r&&(n=o,o=r,r=null),"function"==typeof o&&(n=o,o={}),r=r||"0%",s=this.getKeyframe(i,r),!t){var l=this._appliedKeyframes[i];l&&(s=e.Cord.mixObj(this.getKeyframe(i,l,!0),s)),this._appliedKeyframes[i]=r}return this.beginTransition(t,s,o,n)},e.Cord.View.prototype.applyKeyframe=function(t,i,r){return(this.animations[t]||e.Cord.Styles.animations[t])&&(r=i,i=t,t=null),r=r||"0%",t||(this._appliedKeyframes[i]=r),this.applyStyles(t,this.getKeyframe(i,r))},e.Cord.View.prototype.clearKeyframe=function(t,i,r){return(this.animations[t]||e.Cord.Styles.animations[t])&&(r=i,i=t,t=null),r=r||"0%",t||(r=this._appliedKeyframes[i],delete this._appliedKeyframes[i]),this.clearStyles(t,this.getKeyframe(i,r))},e.Cord.Styles={userAgent:g,browser:b,addStylePrefix:r,addEventPrefix:o,getCSSPrefix:function(e){return i(e,!0)},camelCaseToDash:n,mediaQueries:{all:"",animations:"",hd:"only screen and (max-width: 1200px)",desktop:"only screen and (max-width: 992px)",tablet:"only screen and (max-width: 768px)",phablet:"only screen and (max-width: 480px)",mobile:"only screen and (max-width: 320px)"},animations:{},addAnimation:function(t,i){var r;e.Cord.isPlainObj(t)?r=t:(r={},r[t]=i),l(null,r),e.Cord.Styles.animations=e.Cord.mixObj(e.Cord.Styles.animations,r)}},e.Cord.plugins.push({name:"styles",requirements:["interpolation"],config:{mediaQueryPrefix:"@",parentSelectorPrefix:"&",allSelectorPrefix:"$"},attrs:c,bindings:c,extend:function(i){var r,o={};(i.protoProps.styles||i.protoProps.animations)&&(i.protoProps.className||(i.protoProps.className="view-"+i.protoProps.vuid),e.Cord._styleSheets||t(),r=e.Cord.getPrototypeValuesForKey(this,"className",!0),r.push(i.protoProps.className),r=r.join(" "),i.protoProps.styles&&s(i.protoProps.vuid,i.protoProps.styles,o,"."+r.split(" ").join(".")),i.protoProps.animations&&l(i.protoProps.vuid,i.protoProps.animations)),i.protoProps._styles=o},initialize:function(t){if(this._styles&&this._styles[p]){var i=e.Cord.copyObj(this._styles[p]);e.Cord.log(i),this._callPlugins("strings",t,i);for(var r in i)i.hasOwnProperty(r)&&this.observeFormat(i[r],a(this.el,r),!0)}this._appliedKeyframes={}},complete:function(t){if(this._styles&&t.id&&this._styles[t.id]){var i=e.Cord.copyObj(this._styles[t.id]);e.Cord.log(i),this._callPlugins("strings",t,i);for(var r in i)i.hasOwnProperty(r)&&this.observeFormat(i[r],a(t.el,r),!0)}}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(e,t){var i=function(t){var i,r=t.changedAttributes();if(r)for(i in r)r.hasOwnProperty(i)&&this._invokeObservers(e,i,r[i])};return{namespace:e,model:t,observe:function(){this._hasObservers(e)||this.listenTo(t,"change",i)},unobserve:function(){this._hasObservers(e)||this.stopListening(t,"change",i)},getValue:function(e){return t.get(e)},setValue:function(e,i){t.set(e,i)}}}e.Cord.UnmanagedScopes={set:function(i,r){if(i=i.toLowerCase(),e.Cord._scopes[i])throw new Error("Attempting to override an existing scope.");e.Cord._scopes[i]=t(i,r)}},e.Cord.plugins.push({name:"unmanagedscopes"})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone"));