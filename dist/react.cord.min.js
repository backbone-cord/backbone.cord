!function(e){"use strict";function t(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function n(e){var n=e+"Search",r=e+"Value";return e="_"+e,{get:function(){return this[e]},set:function(i){this[e]=i,this[n]=new RegExp(t(i.prefix)+".*?"+t(i.suffix),"g"),this[r]=new RegExp(t(i.prefix)+"\\s*(.*?)\\s*"+t(i.suffix))}}}function r(e,t){return function(){return e.apply(this,arguments),t.apply(this,arguments)}}function i(e){return e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}function o(e){var t,n,r={};for(t in e)n=e[t],i(n)&&(n=o(n)),r[t]=n;return r}function s(e){var t,n,r;for(t=1;t<arguments.length;++t){r=arguments[t];for(n in r)e[n]=r[n]}return e}function l(e){var t,n,i,o,s;for(t=1;t<arguments.length;++t){i=arguments[t];for(n in i)o=e[n],s=i[n],"function"==typeof o&&"function"==typeof s?e[n]=r(s,o):e[n]=i[n]}return e}function a(e){var t,n,s,l,u;for("string"==typeof e&&(e=V.mixins[e]||{}),e=o(e),t=1;t<arguments.length;++t){l=arguments[t],"string"==typeof l&&(l=V.mixins[l]||{});for(n in l)s=e[n],u=l[n],i(s)&&i(u)?e[n]=a(s,u):"function"==typeof s&&"function"==typeof u?e[n]=r(s,u):e[n]=u}return e}function u(e,t,n){for(var r=n?e.prototype:Object.getPrototypeOf(e),i=[];r;r=Object.getPrototypeOf(r))r.hasOwnProperty(t)&&i.unshift(r[t]);return i}function c(e){var t,n;return e.args?e.args:(t=e.toString(),n=/__args__/.test(t)?e("__args__"):t.slice(t.indexOf("(")+1,t.indexOf(")")).match(/([^\s,]+)/g),n||(n=[]),n)}function f(e,t){var n,r;for(t=Array.isArray(t)?t:t.split("."),n=0;n<t.length;++n)r=t[n],e.getValueForKey?(V.scopes[r.toLowerCase()]&&n+1<t.length&&(n+=1,r=r+"."+t[n]),e=e.getValueForKey(r)):e instanceof b.Model?e="id"===r?e.id:e.get(r):e&&(e="value"===r&&e.nodeType===Node.ELEMENT_NODE?V.decodeValue(e):e[r]);return e}function h(e,t,n){var r;t=Array.isArray(t)?t:t.split("."),e=f(e,t.slice(0,-1)),r=t[t.length-1],e.setValueForKey?e.setValueForKey(r,n):e instanceof b.Model?e.set("id"===r?e.idAttribute:r,n):e&&("value"===r&&e.nodeType===Node.ELEMENT_NODE?V.encodeValue(e,n):e[r]=n)}function p(e,t){return function(n,r){for(var i=0;i<t.length;++i)r=t[i](r);return e.call(this,n,r)}}function d(e){return function(t,n){e.call(this,t,!V.convertToBool(n))}}function g(e,t){return function(n,r){return e.call(this,n,f(r,t))}}var b=e.Backbone||require("backbone"),v=e.cordCompatibilityMode,y=e.cordDebug,m=v?b.View.extend({}):b.View,_=v?b.Model.extend({}):b.Model,x=v?b.Collection.extend({}):b.Collection,V=b.Cord={VERSION:"1.0.37",View:m,Model:_,Collection:x,EmptyView:m.extend({tagName:"meta"}),EmptyModel:new(_.extend({set:function(){return this},toString:function(){return""}})),EmptyCollection:new(x.extend({add:function(){return this},reset:function(){return this},set:function(){return this},toString:function(){return""}})),mixins:{},filters:{lower:function(e){return V.convertToString(e).toLowerCase()},upper:function(e){return V.convertToString(e).toUpperCase()},title:function(e){return V.convertToString(e).replace(/\b[^\s-]*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}},decoders:{range:function(e){return parseInt(e.value)},number:function(e){return Number(e.value)},"int":function(e){return parseInt(e.value)},integer:function(e){return parseInt(e.value)},"float":function(e){return parseFloat(e.value)},decimal:function(e){return parseFloat(e.value)},date:function(e){return new Date(e.value)},datetime:function(e){return new Date(e.value)},bool:function(e){return e.checked},checkbox:function(e){return e.checked}},encoders:{date:function(e,t){e.value=t.toDateString()},datetime:function(e,t){e.value=t.toString()},bool:function(e,t){e.checked=V.convertToBool(t)},checkbox:function(e,t){e.checked=V.convertToBool(t)}},decodeValue:function(e){var t=V.decoders[e.getAttribute("data-type")||e.getAttribute("type")];return e.hasAttribute("data-null")&&!e.value?null:t?t(e):e.value},encodeValue:function(e,t){var n=V.encoders[e.getAttribute("data-type")||e.getAttribute("type")];n?n(e,t):e.value=V.convertToString(t);var r=document.createEvent("HTMLEvents");r.initEvent("change",!0,!0),e.dispatchEvent(r),r=document.createEvent("HTMLEvents"),r.initEvent("input",!0,!0),e.dispatchEvent(r)},ForceValue:function(e){this.value=e},convertToString:function(e){return null===e||void 0===e?"":e.toString()},convertToBool:function(e){return!(!e||void 0!==e.length&&!e.length)},convertToNumber:function(e){return Number(e)||0},randomUID:function(){return(Math.floor(65536*(1+Math.random()))^Date.now()%65536).toString(16).substr(1)},randomGUID:function(){var e=V.randomUID;return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},randomCode:function(e){var t="";for(e=e||12;t.length<e;)t+=V.randomUID();return t.substr(0,e)},setImmediate:(e.requestAnimationFrame||e.setTimeout).bind(e),clearImmediate:(e.cancelAnimationFrame||e.clearTimeout).bind(e),hasClass:function(e,t){return(e.getAttribute("class")||"").split(" ").indexOf(t)!==-1},addClass:function(e,t){Array.isArray(t)||(t=t.split(" "));for(var n=0;n<t.length;++n)V.hasClass(e,t[n])||e.setAttribute("class",((e.getAttribute("class")||"")+" "+t[n]).trim())},removeClass:function(e,t){var n,r=(e.getAttribute("class")||"").split(" ");for(Array.isArray(t)||(t=t.split(" ")),n=r.length-1;n>=0;--n)t.indexOf(r[n])!==-1&&r.splice(n,1);e.setAttribute("class",r.join(" "))},scopes:{},parseKeyPath:function(e){var t;return e=e.replace(/__/g,"."),t=e.split("."),1!==t.length&&V.scopes[t[0].toLowerCase()]?t[0]=t[0].toLowerCase():t.unshift("this"),t},regex:{}};Object.defineProperties(V.regex,{variable:n("variable"),conditional:n("conditional")}),V.regex.variable={prefix:"[",suffix:"]"},V.regex.conditional={prefix:"(",suffix:")"},s(V,{isPlainObj:i,copyObj:o,extendObj:s,extendProto:l,mixObj:a,getPrototypeValuesForKey:u,getFunctionArgs:c,log:y?function(){for(var e=[],t=Array.prototype.slice.call(arguments),n=0;n<t.length;++n)e.push("object"==typeof t[n]?"%O":"%s");t.unshift(e.join(" | ")),console.log.apply(console,t)}:function(){}});var O=V.createSetValueCallback=function(e){return function(){this.setValueForKey(e,arguments[arguments.length-1])}};V.Binding={_getObservers:function(e,t,n){var r;return null===this._observers?t?[]:{}:(e=e.toLowerCase(),r=this._observers[e],r||(r={},n&&(this._observers[e]=r)),t&&(r=r[t]?r[t]:n?r[t]=[]:[]),r)},_hasObservers:function(e,t){var n=this._getObservers(e,t);return Array.isArray(n)?!!n.length:!!Object.keys(n).length},_addObserver:function(e,t,n){var r=this._getObservers(e,t,!0);r.push(n)},_removeObserver:function(e,t,n){var r=this._getObservers(e);if(r[t]){var i=r[t].indexOf(n);i!==-1&&(r[t].splice(i,1),r[t].length||delete r[t])}},_invokeObservers:function(e,t,n){V.log(e,t,n);var r,i=this._getObservers(e,t);for(r=0;r<i.length;++r)i[r].call(this,t,n);return this},observe:function(e,t,n){var r,i,o;if("string"==typeof t&&(t=this[t]||O(t)),"function"!=typeof t)return this;if("!"===e[0]&&(e=e.substr(1),t=d(t)),e.indexOf("|")!==-1){var s,l=[],a=e.split("|");for(e=a[0].trim(),s=1;s<a.length;++s)l.push(V.filters[a[s].trim()]||Math[a[s].trim()]);t=p(t,l)}return"%"===e[0]?(e=e.substr(1),t.call(this,null,this.getValueForKey.call(this,e)),this):(r=V.parseKeyPath(e),i=r[0],e=r[1],o=V.scopes[i],r.length>2&&(t=g(t,r.slice(2))),o.observe.call(this,e,t,n),this._addObserver(i,e,t),n&&t.call(this,e,o.getValue.call(this,e)),this)},unobserve:function(e,t){var n,r,i;return"string"==typeof t&&(t=this[t]),t?(n=V.parseKeyPath(e),r=n[0],e=n[1],i=V.scopes[r],this._removeObserver(r,e,t),i.unobserve.call(this,e,t),this):this},stopObserving:function(){var e,t;for(e in this._observers)t=V.scopes[e],t.stop&&t.stop.call(this);this._observers=null},getValueForKey:function(e){var t,n,r;return t=V.parseKeyPath(e),n=V.scopes[t[0]],r=n.getValue.call(this,t[1]),t.length>2&&(r=f(r,t.slice(2))),r},setValueForKey:function(e,t){var n,r;return n=V.parseKeyPath(e),r=V.scopes[n[0]],n.length>2?h(r.getValue.call(this,n[1]),n.slice(2),t):r.setValue.call(this,n[1],t),this},setValuesForKeys:function(e){var t,n;if(i(e))for(n in e)this.setValueForKey(n,e[n]);else for(t=0;t+1<arguments.length;t+=2)this.setValueForKey(arguments[t],arguments[t+1]);return this},model:V.EmptyModel,_modelObserver:function(e,t){var n,r=t._changed||e.changedAttributes();if(r)for(n in r)this._invokeObservers("model",n,r[n])},setModel:function(e){var t,n,r;if(this.model===e)return this;if(e||(e=V.EmptyModel),!(e instanceof b.Model))throw new Error("Attempting to assign a non-Backbone.Model to View.model.");if(n=this.model,this.model=e,this.stopListening(n),this.listenTo(this.model,"change",this._modelObserver),r=this._getObservers("model"),Object.keys(r).length)if(this.model===V.EmptyModel)for(t in r)this._invokeObservers("model",t,void 0);else this._modelObserver(this.model,{_changed:n.changedAttributes(this.model.attributes)});return this},setCollection:function(e){if(this.collection===e)return this;if(e||(e=Object.getPrototypeOf(this).collection),!(e instanceof b.Collection))throw new Error("Attempting to assign a non-Backbone.Collection to View.collection.");return this.collection&&this.stopListening(this.collection),this.collection=e,this}},s(m.prototype,V.Binding),V.scopes.model={observe:function(e,t){"id"===e&&this._addObserver("model",this.model.idAttribute,t)},unobserve:function(e,t){"id"===e&&this._removeObserver("model",this.model.idAttribute,t)},getValue:function(e){return"id"===e?this.model.id:this.model.get(e)},setValue:function(e,t){"id"===e&&(e=this.model.idAttribute),this.model.set(e,t)}},"object"==typeof exports&&(module.exports=V)}("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global),function(e){"use strict";function t(e,t){var n=null;return e&&V&&(n=V._boundGUIDs[e]||(V._boundGUIDs[e]=g()),V._boundGUIDProxies[n]=t),n}function n(e){if(!e.hasAttribute(A))return!1;var t=e.getAttribute(w);return t&&t===O?(O=null,!0):(O=t,!1)}function r(e,t,r){var i=document.body.querySelector("["+w+'="'+e+'"]');i&&!n(i)&&p(i,r)}function i(e,t){return function(r){var i=r.currentTarget;n(i)||(this.setValueForKey(e,d(i)),t&&t(r))}.bind(V)}function o(e){var t,n,r={},i={},o={initialize:"componentWillMount",remove:"componentWillUnmount"};if(e.properties)for(t in e.properties)n=e.properties[t],"function"==typeof n?i[t]=S(n):u(n)?i[t]=n.get?S(n.get):n.value:i[t]=n;for(t in e)n=e[t],"function"==typeof n&&(r[o[t]||t]=n);e.methods=r,e.state=i,e._normalized=!0}var s=e.Backbone||require("backbone"),l=s.Cord,a=l.extendObj,u=l.isPlainObj,c=l.extendProto,f=l.ForceValue,h=l.convertToString,p=l.encodeValue,d=l.decodeValue,g=l.randomGUID,b=l.setImmediate,v=l.regex,y=e.preact||e.react||require("preact")||require("react"),m=y.Component,_=y.options,x=m.prototype.setState,V=null,O=null,w="data-binding-guid",A="data-binding-feedback",C=l.bind=function(e,t){if(V){var n=t||e;return V._boundKeys[n]||(V.observe(e,function(e,n){t&&this._boundGUIDProxies[t]?this._boundGUIDProxies[t].call(this,t,e,n):x.call(this,{})}),V._boundKeys[n]=!0),V.getValueForKey(e)}},E=function(e){this.key=e},j={};l.Key=function(e){return j[e]||(j[e]=new E(e))};var k=l.bindKey=function(e){return e instanceof E?C(e.key):e};l.bindProps=function(e,t){t=t||Object.keys(e);for(var n=0;n<t.length;++n)e[t[n]]=k(e[t[n]]);return e};var S=l.computed=function(e,t){if(t=t||l.getFunctionArgs(e),!t.length)return e;var n=function(n){var r,i=[],o={};for(n=n.split("@")[0],r=0;r<t.length;++r)i.push(this.getValueForKey(t[r]));o[n]=e.apply(this,i),this.setState(o)};return n._args=t,n._computed=!0,n};l.scopes["this"]={observe:function(){},unobserve:function(){},getValue:function(e){return this.state[e]},setValue:function(e,t){var n={};"object"==typeof t&&Object.getPrototypeOf(t)===f.prototype&&(t=t.value),n[e]=t,this.setState(n)}},l.Component=function(e){m.apply(this,arguments),this._observers={},this._boundKeys={},this._boundGUIDs={},this._boundGUIDProxies={};var t=this.render,n=this.componentDidMount,r=this.componentDidUpdate;this.render=function(){var e;this._prevComponent=V,V=this;try{e=t.apply(this,arguments)}catch(n){throw V=this._prevComponent,n}return e},this.componentDidMount=function(){V=this._prevComponent,n&&n.apply(this,arguments)},this.componentDidUpdate=function(){V=this._prevComponent,r&&r.apply(this,arguments)};var i=this.componentWillMount;this.componentWillMount=function(){var e,t,n,r,o,s,l=this.state;this._mixinState&&a(l,this._mixinState);for(t in l)if(r=l[t],"function"==typeof r&&r._computed){n=r._args,o=V,V=this;try{for(e=0;e<n.length;++e)s=t+"@"+e,this._boundGUIDProxies[s]=r,C(n[e],s);r.call(this,t)}finally{V=o}}i&&i.apply(this,arguments)};var o=this.componentWillReceiveProps;this.componentWillReceiveProps=function(e){e.model&&this.setModel(e.model),e.collection&&this.setCollection(e.collection),o&&o.apply(this,arguments)},e.model&&this.setModel(e.model),e.collection&&this.setCollection(e.collection)},l.Component.prototype=Object.create(m.prototype),l.Component.prototype.constructor=l.Component,a(l.Component.prototype,l.Binding,s.Events),delete l.Component.prototype.bind,delete l.Component.prototype.unbind,l.Component.prototype.setState=function(e,t){"function"==typeof e&&(e=e(this.state,this.props));for(var n in e)this._hasObservers("this",n)&&this._invokeObservers("this",n,e[n]);x.call(this,e,t)};var F=l.Component.prototype.setCollection;l.Component.prototype.setCollection=function(e){if(this.collection===e)return this;F.apply(this,arguments);var t=function(){x.call(this,{})};this.listenTo(e,"add remove sort reset",t),t.call(this)};var K=_.beforeUnmount;_.beforeUnmount=function(e){e.stopObserving&&e.stopObserving(),e.stopListening&&e.stopListening(),K&&K.apply(this,arguments)};var M=_.vnode;_.vnode=function(e){var n,o,s,l,a,u,c,f,p=Array.isArray(e.children)?e.children:[e.children],d=e.attributes||{};if(d.raw)delete d.raw;else{for(n=p.length-1;n>=0;--n)if(s=p[n],"string"==typeof s&&(l=s.split(v.variableSearch),l.length>1)){for(u=[n,1],a=s.match(v.variableSearch),o=0;o<a.length;++o)l[o].length&&u.push(l[o]),u.push(h(C(v.variableValue.exec(a[o])[1])));l[o].length&&u.push(l[o]),Array.prototype.splice.apply(p,u)}e.children=p}if("function"!=typeof e.nodeName){d.bind&&(d.observe=d.bind,d.change=d.bind,delete d.bind);var g=d.observe||d.change||d.input;if(g){var y=t(e.key||d.name||g,r);y?(d[w]=y,d.observe&&(f=C(d.observe,y),delete d.observe,b(r.bind(null,y,null,f)),d.observe!==d.change&&d.observe!==d.input||(d[A]=!0)),d.change&&(d.onChange=i(d.change,d.onChange||d.onchange),delete d.change),d.input&&(d.onInput=i(d.input,d.onInput||d.oninput),delete d.input)):(delete d.observe,delete d.change,delete d.input)}}if(!d.nobind)for(c in d)f=d[c],"string"==typeof f&&f[0]===v.variable.prefix&&f[f.length-1]===v.variable.suffix&&(d[c]=C(f.substr(1,f.length-2)));M&&M.apply(this,arguments)},l.Component.mixin=function(){var e,t,n=this.prototype,r=arguments,i={};if(!n._mixinsApplied){for(e=0;e<r.length;++e)t=r[e],"string"==typeof t&&(t=l.mixins[t]),t._normalized||o(t),c(n,t.methods),a(i,t.state);n._mixinState=i,n._mixinsApplied=!0}},"object"==typeof exports&&(module.exports=l)}("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global),function(e){"use strict";function t(){var e,t,n,i,o=this.changedAttributes(),s={};for(i in o)if(this._computedArgs[i])for(n=this._computedArgs[i],e=0;e<n.length;++e)t=n[e],s[t]||(s[t]=this.get(t),this.trigger("change:"+t,this,s[t],{}));r.setImmediate(function(){this.changed=s,this.trigger("change",this,{})}.bind(this),0)}function n(e,t){return function(){var n,r=[];for(n=0;n<t.length;++n)r.push(this.get(t[n]));return e.apply(this,r)}}var r=e.Cord,i=r.Model,o=r.getFunctionArgs;i.prototype._addComputed=function(e,r){var i,s,l,a=o(r);for(this._computed||(this._computed={},this._computedArgs={},i=this.get,this.get=function(e){var t=this._computed[e];return t?t.call(this):i.call(this,e)},this.listenTo(this,"change",t)),this._computed[e]=n(r,a),s=0;s<a.length;++s)l=a[s],this._computedArgs[l]||(this._computedArgs[l]=[]),this._computedArgs[l].push(e)};var s=i.extend;i.extend=function(e,t){var n;return t=t||{},e.computed&&(n=e.initialize||i.prototype.initialize,e.initialize=function(){if(this.computed)for(var e in this.computed)this._addComputed(e,this.computed[e]);return n.apply(this,arguments)}),t.choices=e.choices,t.defaults=e.defaults,t.instructions=e.instructions,t.titles=e.titles,t.subtitles=e.subtitles,t.rules=e.rules,s.call(this,e,t)}}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";var t=e.Cord,n=t.mixObj,r=/(\(\?)?:\w+/g,i=/\*\w+/g,o=/\w+/g;t.Router=e.Router.extend({route:function(t,n,s){var l,a,u,c=t.split("/"),f=this.key,h={},p={};for(l=0;l<c.length;++l)u=c[l],u.length&&(a=u.match(r)||u.match(i),a?p[l]=a[0].substr(1):(a=u.match(o),a&&(h[f]=a[0],f="sub"+f)));return"function"==typeof n&&(s=n,n=""),e.Router.prototype.route.call(this,t,n,this.wrapCallback(n,s,h,p))},wrapCallback:function(e,r,i,o){return function(){var s,l={},a=t.UnmanagedScopes.route,u=Object.keys(a.attributes);for(s=0;s<u.length;++s)l[u[s]]=null;for(l.name=e||"",s=0;s<arguments.length;++s)null!==arguments[s]&&(l[o[s]]=arguments[s]);if(l=n(l,i),a.set(l),r)return r.apply(this,arguments)}}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(e,t,n,r,i,s,u){(!e||i instanceof l)&&(r=r&&o.parseError(s,u),this.setValueForKey?(this.setValueForKey("syncProgress",new a(t)),this.setValueForKey("syncing",new a(n)),this.setValueForKey("syncError",new a(r))):(this.syncProgress=t,this.syncing=n,this.syncError=r))}function n(e){var n=e instanceof l;this.listenTo(e,"request",t.bind(this,n,0,!0,null)),this.listenTo(e,"sync",t.bind(this,n,1,!1,null)),this.listenTo(e,"error",t.bind(this,n,1,!1,!0))}function r(e){if(e.lengthComputable){var t=e.loaded/e.total;this.setValueForKey?this.setValueForKey("syncProgress",new a(t)):this.syncProgress=t}}function i(t,i,o){this.__syncListening||(this.__syncListening=!0,n.call(this,this));var s=o.xhr||e.$.ajaxSettings&&e.$.ajaxSettings.xhr||function(){return new window.XMLHttpRequest},l=r.bind(this);o.xhr=function(){var e=s();return e.addEventListener("progress",l),e.upload.addEventListener("progress",l),e}}var o=e.Cord,s=o.Model,l=o.Collection,a=o.ForceValue;o.parseError=o.parseError||function(e){return e.status};var u=s.prototype.sync;s.prototype.sync=function(){return i.apply(this,arguments),u.apply(this,arguments)};var c=l.prototype.sync;l.prototype.sync=function(){return i.apply(this,arguments),c.apply(this,arguments)},o.mixins.syncing={properties:{syncing:{value:!1,readonly:!0},syncProgress:{value:0,readonly:!0},syncError:{value:null,readonly:!0}},_initSyncingProperties:function(e){e&&(this.setValueForKey("syncing",new a(e.syncing)),this.setValueForKey("syncProgress",new a(e.syncProgress)),this.setValueForKey("syncError",new a(e.syncError)),n.call(this,e))},setModel:function(e){this._initSyncingProperties(e)},setCollection:function(e){this._initSyncingProperties(e)}}}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";var t=e.Cord,n=t.Model,r=t.EmptyModel,i=t.ForceValue,o={url:/^(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/i,ip:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,slug:/^[a-z0-9-]+$/i,username:/^[a-z0-9_@\-\+\.]{3,150}$/i,color:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i};t.Validation={formats:o},t.scopes.errors={namespace:"errors",observe:function(){},unobserve:function(){},getValue:function(e){return this.errors.get(e)},setValue:function(){}},t.validate=function(e,t){var r,i,s,l=t.type.split(" ")[0];if(null===e||""===e&&"string"===t.type)return!t.required||"required";if("string"===l&&"string"!=typeof e||"date"===l&&!(e instanceof Date)||"int"===l&&(+e!==e||e%1!==0)||"float"===l&&"number"!=typeof e||"bool"===l&&"boolean"!=typeof e||"array"===l&&!Array.isArray(e)||"model"===l&&!(e instanceof n))return"type";if(null!==t.equals&&void 0!==t.equals){if(Array.isArray(t.equals)){if(t.equals.indexOf(e)===-1)return"equals"}else if("object"==typeof t.equals){if(void 0===t.equals[e])return"equals"}else if(e!==t.equals)return"equals"}else if("string"===t.type){if(t.min&&e.length<t.min)return"min";if(t.max&&e.length>t.max)return"max";if(t.format)for(s=Array.isArray(t.format)?t.format:[t.format],r=0;r<s.length;++r)if(i=s[r],"string"==typeof i&&(i=o[i]),"function"==typeof i&&!i(e)||i instanceof RegExp&&!i.test(e))return"format"}else{if(t.min&&e<t.min)return"min";if(t.max&&e>t.max)return"max"}return!0},t.parseValidationError=function(e,t,n,r){var i="string"===t.type?"The length of ":"",o="string"===t.type?" characters":"";switch(n){case"required":return r+" is required";case"min":return i+r+" must be greater than or equal to "+t.min+o;case"max":return i+r+" must be less than or equal to "+t.max+o;case"format":if("string"==typeof t.format)return r+" is not a valid "+t.format}return r+" is not valid"},t.mixins.validation={errors:r,properties:{allErrors:{readonly:!0},latestError:{readonly:!0},isValid:function(e){return"__args__"===e?["allErrors"]:!e||!e.length}},events:{"submit form":"onSubmitValidate"},initialize:function(){this.errors=new n,this.listenTo(this.errors,"change",function(e){var t,n=e.changedAttributes();if(n)for(t in n)this._invokeObservers("errors",t,n[t])}),this._addValidatonListeners(this.model)},setModel:function(e){this._addValidatonListeners(e)},onSubmitValidate:function(e){return!!this.model.isValid()||(e&&(e.preventDefault(),e.stopPropagation()),!1)},_addValidatonListeners:function(e){e!==r&&(this.listenTo(e,"invalid",this._onInvalid),this.listenTo(e,"valid",this._onValid))},_onInvalid:function(e,n){var r,o,s,l,a;for(r in n)l="format"===n[r]&&this.model.instructions&&this.model.instructions[r]?this.model.instructions[r]:t.parseValidationError(this.model.get(r),this.model.rules[r],n[r],this.model.titles[r]||"This field",r),this.errors.set(r,l);a=this.model.changedAttributes();for(r in a)n[r]||this.errors.unset(r);s=[],o=this.errors.attributes;for(r in o)s.push(o[r]);this.setValueForKey("allErrors",new i(s)),this.setValueForKey("latestError",new i(l))},_onValid:function(e){this._onInvalid(e,{})}},t.mixins.validateOnBlur={initialize:function(){this._addBlurListener(this.model)},setModel:function(e){this._addBlurListener(e)},_addBlurListener:function(e){e!==r&&e.listen("change",function(e){e.validate(e.changedAttributes(),{partial:!0})})}},n.prototype.validate=function(e,n){var r,i,o,s={};if(!this.rules)return null;for(r in e)i=this.rules[r],i&&(null===i.equals&&void 0===i.equals&&(i.equals=this.choices&&this.choices[r]),o=t.validate(e[r],i),o!==!0&&(s[r]=o));return this.extendedValidate&&this.extendedValidate(s),Object.keys(s).length?s:void(n.partial||this.trigger("valid",this,n))}}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(e,t){var n=function(t){var n,r=t.changedAttributes();if(r)for(n in r)this._invokeObservers(e,n,r[n])};return{namespace:e,model:t,observe:function(){this._hasObservers(e)||this.listenTo(t,"change",n)},unobserve:function(){this._hasObservers(e)||this.stopListening(t,"change",n)},getValue:function(e){return t.get(e)},setValue:function(e,n){t.set(e,n)}}}var n=e.Cord,r=e.Model,i=n.scopes;n.SharedScopes={set:function(e,n){if(e=e.toLowerCase(),i[e])throw new Error("Attempting to override an existing scope.");i[e]=t(e,n),this[e]=n}},n.SharedScopes.set("shared",new r),n.SharedScopes.set("route",new r)}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone"));