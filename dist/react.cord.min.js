!function(e){"use strict";function t(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function n(e){var n=e+"Search",o=e+"Value";return e="_"+e,{get:function(){return this[e]},set:function(r){this[e]=r,this[n]=new RegExp(t(r.prefix)+".*?"+t(r.suffix),"g"),this[o]=new RegExp(t(r.prefix)+"\\s*(.*?)\\s*"+t(r.suffix))}}}function o(e,t){return function(){return e.apply(this,arguments),t.apply(this,arguments)}}function r(e){return e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}function i(e){var t,n,o={};for(t in e)n=e[t],r(n)&&(n=i(n)),o[t]=n;return o}function s(e){var t,n,o;for(t=1;t<arguments.length;++t){o=arguments[t];for(n in o)e[n]=o[n]}return e}function l(e){var t,n,r,i,s;for(t=1;t<arguments.length;++t){r=arguments[t];for(n in r)i=e[n],s=r[n],"function"==typeof i&&"function"==typeof s?e[n]=o(s,i):e[n]=r[n]}return e}function a(e){var t,n,s,l,u;for("string"==typeof e&&(e=V.mixins[e]||{}),e=i(e),t=1;t<arguments.length;++t){l=arguments[t],"string"==typeof l&&(l=V.mixins[l]||{});for(n in l)s=e[n],u=l[n],r(s)&&r(u)?e[n]=a(s,u):"function"==typeof s&&"function"==typeof u?e[n]=o(s,u):e[n]=u}return e}function u(e,t,n){for(var o=n?e.prototype:Object.getPrototypeOf(e),r=[];o;o=Object.getPrototypeOf(o))o.hasOwnProperty(t)&&r.unshift(o[t]);return r}function c(e){var t=e.toString(),n=t.slice(t.indexOf("(")+1,t.indexOf(")")).match(/([^\s,]+)/g);return n||(n=[]),n}function h(e,t){var n,o;for(t=Array.isArray(t)?t:t.split("."),n=0;n<t.length;++n)o=t[n],e.getValueForKey?(V.scopes[o.toLowerCase()]&&n+1<t.length&&(n+=1,o=o+"."+t[n]),e=e.getValueForKey(o)):e instanceof b.Model?e="id"===o?e.id:e.get(o):e&&(e="value"===o&&e.nodeType===Node.ELEMENT_NODE?V.decodeValue(e):e[o]);return e}function f(e,t,n){var o;t=Array.isArray(t)?t:t.split("."),e=h(e,t.slice(0,-1)),o=t[t.length-1],e.setValueForKey?e.setValueForKey(o,n):e instanceof b.Model?e.set("id"===o?e.idAttribute:o,n):e&&("value"===o&&e.nodeType===Node.ELEMENT_NODE?V.encodeValue(e,n):e[o]=n)}function p(e,t){return function(n,o){for(var r=0;r<t.length;++r)o=t[r](o);return e.call(this,n,o)}}function d(e){return function(t,n){e.call(this,t,!V.convertToBool(n))}}function g(e,t){return function(n,o){return e.call(this,n,h(o,t))}}var b=e.Backbone||require("backbone"),v=e.cordCompatibilityMode,y=e.cordDebug,m=v?b.View.extend({}):b.View,_=v?b.Model.extend({}):b.Model,x=v?b.Collection.extend({}):b.Collection,V=b.Cord={VERSION:"1.0.30",View:m,Model:_,Collection:x,EmptyView:m.extend({tagName:"meta"}),EmptyModel:new(_.extend({set:function(){return this},toString:function(){return""}})),EmptyCollection:new(x.extend({add:function(){return this},reset:function(){return this},set:function(){return this},toString:function(){return""}})),mixins:{},filters:{lower:function(e){return V.convertToString(e).toLowerCase()},upper:function(e){return V.convertToString(e).toUpperCase()},title:function(e){return V.convertToString(e).replace(/\b[^\s-]*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}},decoders:{range:function(e){return parseInt(e.value)},number:function(e){return Number(e.value)},"int":function(e){return parseInt(e.value)},integer:function(e){return parseInt(e.value)},"float":function(e){return parseFloat(e.value)},decimal:function(e){return parseFloat(e.value)},date:function(e){return new Date(e.value)},datetime:function(e){return new Date(e.value)},bool:function(e){return e.checked},checkbox:function(e){return e.checked}},encoders:{date:function(e,t){e.value=t.toDateString()},datetime:function(e,t){e.value=t.toString()},bool:function(e,t){e.checked=V.convertToBool(t)},checkbox:function(e,t){e.checked=V.convertToBool(t)}},decodeValue:function(e){var t=V.decoders[e.getAttribute("data-type")||e.getAttribute("type")];return e.hasAttribute("data-null")&&!e.value?null:t?t(e):e.value},encodeValue:function(e,t){var n=V.encoders[e.getAttribute("data-type")||e.getAttribute("type")];n?n(e,t):e.value=V.convertToString(t);var o=document.createEvent("HTMLEvents");o.initEvent("change",!0,!0),e.dispatchEvent(o),o=document.createEvent("HTMLEvents"),o.initEvent("input",!0,!0),e.dispatchEvent(o)},ForceValue:function(e){this.value=e},convertToString:function(e){return null===e||void 0===e?"":e.toString()},convertToBool:function(e){return!(!e||void 0!==e.length&&!e.length)},convertToNumber:function(e){return Number(e)||0},randomUID:function(){return(Math.floor(65536*(1+Math.random()))^Date.now()%65536).toString(16).substr(1)},randomGUID:function(){var e=V.randomUID;return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},randomCode:function(e){var t="";for(e=e||12;t.length<e;)t+=V.randomUID();return t.substr(0,e)},setImmediate:(e.requestAnimationFrame||e.setTimeout).bind(e),clearImmediate:(e.cancelAnimationFrame||e.clearTimeout).bind(e),hasClass:function(e,t){return(e.getAttribute("class")||"").split(" ").indexOf(t)!==-1},addClass:function(e,t){Array.isArray(t)||(t=t.split(" "));for(var n=0;n<t.length;++n)V.hasClass(e,t[n])||e.setAttribute("class",((e.getAttribute("class")||"")+" "+t[n]).trim())},removeClass:function(e,t){var n,o=(e.getAttribute("class")||"").split(" ");for(Array.isArray(t)||(t=t.split(" ")),n=o.length-1;n>=0;--n)t.indexOf(o[n])!==-1&&o.splice(n,1);e.setAttribute("class",o.join(" "))},scopes:{},parseKeyPath:function(e){var t;return e=e.replace(/__/g,"."),t=e.split("."),1!==t.length&&V.scopes[t[0].toLowerCase()]?t[0]=t[0].toLowerCase():t.unshift("this"),t},regex:{}};Object.defineProperties(V.regex,{variable:n("variable"),conditional:n("conditional")}),V.regex.variable={prefix:"[",suffix:"]"},V.regex.conditional={prefix:"(",suffix:")"},s(V,{isPlainObj:r,copyObj:i,extendObj:s,extendProto:l,mixObj:a,getPrototypeValuesForKey:u,getFunctionArgs:c,log:y?function(){for(var e=[],t=Array.prototype.slice.call(arguments),n=0;n<t.length;++n)e.push("object"==typeof t[n]?"%O":"%s");t.unshift(e.join(" | ")),console.log.apply(console,t)}:function(){}});var O=V.createSetValueCallback=function(e){return function(){this.setValueForKey(e,arguments[arguments.length-1])}};V.Binding={_getObservers:function(e,t,n){var o;return null===this._observers?t?[]:{}:(e=e.toLowerCase(),o=this._observers[e],o||(o={},n&&(this._observers[e]=o)),t&&(o=o[t]?o[t]:n?o[t]=[]:[]),o)},_hasObservers:function(e,t){var n=this._getObservers(e,t);return Array.isArray(n)?!!n.length:!!Object.keys(n).length},_addObserver:function(e,t,n){var o=this._getObservers(e,t,!0);o.push(n)},_removeObserver:function(e,t,n){var o=this._getObservers(e);if(o[t]){var r=o[t].indexOf(n);r!==-1&&(o[t].splice(r,1),o[t].length||delete o[t])}},_invokeObservers:function(e,t,n){V.log(e,t,n);var o,r=this._getObservers(e,t);for(o=0;o<r.length;++o)r[o].call(this,t,n);return this},observe:function(e,t,n){var o,r,i;if("string"==typeof t&&(t=this[t]||O(t)),"function"!=typeof t)return this;if("!"===e[0]&&(e=e.substr(1),t=d(t)),e.indexOf("|")!==-1){var s,l=[],a=e.split("|");for(e=a[0].trim(),s=1;s<a.length;++s)l.push(V.filters[a[s].trim()]||Math[a[s].trim()]);t=p(t,l)}return"%"===e[0]?(e=e.substr(1),t.call(this,null,this.getValueForKey.call(this,e)),this):(o=V.parseKeyPath(e),r=o[0],e=o[1],i=V.scopes[r],o.length>2&&(t=g(t,o.slice(2))),i.observe.call(this,e,t,n),this._addObserver(r,e,t),n&&t.call(this,e,i.getValue.call(this,e)),this)},unobserve:function(e,t){var n,o,r;return"string"==typeof t&&(t=this[t]),t?(n=V.parseKeyPath(e),o=n[0],e=n[1],r=V.scopes[o],this._removeObserver(o,e,t),r.unobserve.call(this,e,t),this):this},stopObserving:function(){var e,t;for(e in this._observers)t=V.scopes[e],t.stop&&t.stop.call(this);this._observers=null},getValueForKey:function(e){var t,n,o;return t=V.parseKeyPath(e),n=V.scopes[t[0]],o=n.getValue.call(this,t[1]),t.length>2&&(o=h(o,t.slice(2))),o},setValueForKey:function(e,t){var n,o;return n=V.parseKeyPath(e),o=V.scopes[n[0]],n.length>2?f(o.getValue.call(this,n[1]),n.slice(2),t):o.setValue.call(this,n[1],t),this},setValuesForKeys:function(e){var t,n;if(r(e))for(n in e)this.setValueForKey(n,e[n]);else for(t=0;t+1<arguments.length;t+=2)this.setValueForKey(arguments[t],arguments[t+1]);return this},model:V.EmptyModel,_modelObserver:function(e,t){var n,o=t._changed||e.changedAttributes();if(o)for(n in o)this._invokeObservers("model",n,o[n])},setModel:function(e){var t,n,o;if(this.model===e)return this;if(e||(e=V.EmptyModel),!(e instanceof b.Model))throw new Error("Attempting to assign a non-Backbone.Model to View.model.");if(n=this.model,this.model=e,this.stopListening(n),this.listenTo(this.model,"change",this._modelObserver),o=this._getObservers("model"),Object.keys(o).length)if(this.model===V.EmptyModel)for(t in o)this._invokeObservers("model",t,void 0);else this._modelObserver(this.model,{_changed:n.changedAttributes(this.model.attributes)});return this},setCollection:function(e){if(this.collection===e)return this;if(e||(e=V.EmptyCollection),!(e instanceof b.Collection))throw new Error("Attempting to assign a non-Backbone.Collection to View.collection.");return this.stopListening(this.collection),this.collection=e,this}},s(m.prototype,V.Binding),V.scopes.model={observe:function(e,t){"id"===e&&this._addObserver("model",this.model.idAttribute,t)},unobserve:function(e,t){"id"===e&&this._removeObserver("model",this.model.idAttribute,t)},getValue:function(e){return"id"===e?this.model.id:this.model.get(e)},setValue:function(e,t){"id"===e&&(e=this.model.idAttribute),this.model.set(e,t)}},"object"==typeof exports&&(module.exports=V)}("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global),function(e){"use strict";function t(e,t){var n=null;return e&&V&&(n=V._boundGUIDs[e]||(V._boundGUIDs[e]=g()),V._boundGUIDProxies[n]=t),n}function n(e){if(!e.hasAttribute(A))return!1;var t=e.getAttribute(w);return t&&t===O?(O=null,!0):(O=t,!1)}function o(e,t,o){var r=document.body.querySelector("["+w+'="'+e+'"]');r&&!n(r)&&p(r,o)}function r(e,t){return function(o){var r=o.currentTarget;n(r)||(this.setValueForKey(e,d(r)),t&&t(o))}.bind(V)}function i(e){var t,n,o={},r={},i={initialize:"componentWillMount",remove:"componentWillUnmount"};if(e.properties)for(t in e.properties)n=e.properties[t],"function"==typeof n?r[t]=F(n):u(n)?r[t]=n.get?F(n.get):n.value:r[t]=n;for(t in e)n=e[t],"function"==typeof n&&(o[i[t]||t]=n);e.methods=o,e.state=r,e._normalized=!0}var s=e.Backbone||require("backbone"),l=s.Cord,a=l.extendObj,u=l.isPlainObj,c=l.extendProto,h=l.ForceValue,f=l.convertToString,p=l.encodeValue,d=l.decodeValue,g=l.randomGUID,b=l.setImmediate,v=l.regex,y=e.preact||e.react||require("preact")||require("react"),m=y.Component,_=y.options,x=m.prototype.setState,V=null,O=null,w="data-binding-guid",A="data-binding-feedback",C=l.bind=function(e,t){if(V){var n=t||e;return V._boundKeys[n]||(V.observe(e,function(e,n){t&&this._boundGUIDProxies[t]?this._boundGUIDProxies[t].call(this,t,e,n):x.call(this,{})}),V._boundKeys[n]=!0),V.getValueForKey(e)}},E=function(e){this.key=e},j={};l.Key=function(e){return j[e]||(j[e]=new E(e))};var k=l.bindKey=function(e){return e instanceof E?C(e.key):e};l.bindProps=function(e,t){t=t||Object.keys(e);for(var n=0;n<t.length;++n)e[t[n]]=k(e[t[n]]);return e};var F=l.computed=function(e){var t=l.getFunctionArgs(e);if(!t.length)return e;var n=function(n){var o,r=[],i={};for(n=n.split("@")[0],o=0;o<t.length;++o)r.push(this.getValueForKey(t[o]));i[n]=e.apply(this,r),this.setState(i)};return n._args=t,n._computed=!0,n};l.scopes["this"]={observe:function(){},unobserve:function(){},getValue:function(e){return this.state[e]},setValue:function(e,t){var n={};"object"==typeof t&&Object.getPrototypeOf(t)===h.prototype&&(t=t.value),n[e]=t,this.setState(n)}},l.Component=function(e){m.apply(this,arguments),this._observers={},this._boundKeys={},this._boundGUIDs={},this._boundGUIDProxies={};var t=this.render,n=this.componentDidMount,o=this.componentDidUpdate;this.render=function(){var e;this._prevComponent=V,V=this;try{e=t.apply(this,arguments)}catch(n){throw V=this._prevComponent,n}return e},this.componentDidMount=function(){V=this._prevComponent,n&&n.apply(this,arguments)},this.componentDidUpdate=function(){V=this._prevComponent,o&&o.apply(this,arguments)};var r=this.componentWillMount;this.componentWillMount=function(){var e,t,n,o,i,s,l=this.state;this._mixinState&&a(l,this._mixinState);for(t in l)if(o=l[t],"function"==typeof o&&o._computed){n=o._args,i=V,V=this;try{for(e=0;e<n.length;++e)s=t+"@"+e,this._boundGUIDProxies[s]=o,C(n[e],s);o.call(this,t)}finally{V=i}}r&&r.apply(this,arguments)};var i=this.componentWillReceiveProps;this.componentWillReceiveProps=function(e){e.model&&this.setModel(e.model),e.collection&&this.setCollection(e.collection),i&&i.apply(this,arguments)},e.model&&this.setModel(e.model),e.collection&&this.setCollection(e.collection)},l.Component.prototype=Object.create(m.prototype),l.Component.prototype.constructor=l.Component,a(l.Component.prototype,l.Binding,s.Events),delete l.Component.prototype.bind,delete l.Component.prototype.unbind,l.Component.prototype.setState=function(e,t){"function"==typeof e&&(e=e(this.state,this.props));for(var n in e)this._hasObservers("this",n)&&this._invokeObservers("this",n,e[n]);x.call(this,e,t)};var S=l.Component.prototype.setCollection;l.Component.prototype.setCollection=function(e){if(this.collection===e)return this;S.apply(this,arguments);var t=function(){x.call(this,{})};this.listenTo(e,"add",t),this.listenTo(e,"remove",t),this.listenTo(e,"sort",t),this.listenTo(e,"reset",t),t.call(this)};var K=_.beforeUnmount;_.beforeUnmount=function(e){e.stopObserving&&e.stopObserving(),e.stopListening&&e.stopListening(),K&&K.apply(this,arguments)};var M=_.vnode;_.vnode=function(e){var n,i,s,l,a,u,c,h=Array.isArray(e.children)?e.children:[e.children],p=e.attributes||{};if(p.raw)delete p.raw;else{for(n=h.length-1;n>=0;--n)if(s=h[n],"string"==typeof s&&(l=s.split(v.variableSearch),l.length>1)){for(u=[n,1],a=s.match(v.variableSearch),i=0;i<a.length;++i)l[i].length&&u.push(l[i]),u.push(f(C(v.variableValue.exec(a[i])[1])));l[i].length&&u.push(l[i]),Array.prototype.splice.apply(h,u)}e.children=h}if("function"!=typeof e.nodeName&&(p.bind&&(p.observe=p.bind,p.change=p.bind,delete p.bind),p.observe||p.change||p.input)){var d=t(e.key||p.name,o);d?(p[w]=d,p.observe&&(c=C(p.observe,d),delete p.observe,b(o.bind(null,d,null,c)),p.observe!==p.change&&p.observe!==p.input||(p[A]=!0)),p.change&&(p.onChange=r(p.change,p.onChange||p.onchange),delete p.change),p.input&&(p.onInput=r(p.input,p.onInput||p.oninput),delete p.input)):(delete p.observe,delete p.change,delete p.input)}M&&M.apply(this,arguments)},l.Component.mixin=function(){var e,t,n=this.prototype,o=arguments,r={};if(!n._mixinsApplied){for(e=0;e<o.length;++e)t=o[e],"string"==typeof t&&(t=l.mixins[t]),t._normalized||i(t),c(n,t.methods),a(r,t.state);n._mixinState=r,n._mixinsApplied=!0}},"object"==typeof exports&&(module.exports=l)}("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global),function(e){"use strict";function t(){var e,t,n,r,i=this.changedAttributes(),s={};for(r in i)if(this._computedArgs[r])for(n=this._computedArgs[r],e=0;e<n.length;++e)t=n[e],s[t]||(s[t]=this.get(t),this.trigger("change:"+t,this,s[t],{}));o.setImmediate(function(){this.changed=s,this.trigger("change",this,{})}.bind(this),0)}function n(e,t){return function(){var n,o=[];for(n=0;n<t.length;++n)o.push(this.get(t[n]));return e.apply(this,o)}}var o=e.Cord,r=o.Model,i=o.getFunctionArgs;r.prototype._addComputed=function(e,o){var r,s,l,a=i(o);for(this._computed||(this._computed={},this._computedArgs={},r=this.get,this.get=function(e){var t=this._computed[e];return t?t.call(this):r.call(this,e)},this.listenTo(this,"change",t)),this._computed[e]=n(o,a),s=0;s<a.length;++s)l=a[s],this._computedArgs[l]||(this._computedArgs[l]=[]),this._computedArgs[l].push(e)};var s=r.extend;r.extend=function(e){var t;return e.computed&&(t=e.initialize||r.prototype.initialize,e.initialize=function(){if(this.computed)for(var e in this.computed)this._addComputed(e,this.computed[e]);return t.apply(this,arguments)}),s.apply(this,arguments)}}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";var t=e.Cord,n=t.mixObj,o=/(\(\?)?:\w+/g,r=/\*\w+/g,i=/\w+/g;t.Router=e.Router.extend({route:function(t,n,s){var l,a,u,c=t.split("/"),h=this.key,f={},p={};for(l=0;l<c.length;++l)u=c[l],u.length&&(a=u.match(o)||u.match(r),a?p[l]=a[0].substr(1):(a=u.match(i),a&&(f[h]=a[0],h="sub"+h)));return"function"==typeof n&&(s=n,n=""),e.Router.prototype.route.call(this,t,n,this.wrapCallback(n,s,f,p))},wrapCallback:function(e,o,r,i){return function(){var s,l={},a=t.UnmanagedScopes.route,u=Object.keys(a.attributes);for(s=0;s<u.length;++s)l[u[s]]=null;for(l.name=e||"",s=0;s<arguments.length;++s)null!==arguments[s]&&(l[i[s]]=arguments[s]);if(l=n(l,r),a.set(l),o)return o.apply(this,arguments)}}})}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(e,t,n,o,r,s){n=n&&i.parseError(r,s),this.setValueForKey?(this.setValueForKey("syncProgress",new a(e)),this.setValueForKey("syncing",new a(t)),this.setValueForKey("syncError",new a(n))):(this.syncProgress=e,this.syncing=t,this.syncError=n)}function n(e){this.listenTo(e,"request",t.bind(this,0,!0,null)),this.listenTo(e,"sync",t.bind(this,1,!1,null)),this.listenTo(e,"error",t.bind(this,1,!1,!0))}function o(e){if(e.lengthComputable){var t=e.loaded/e.total;this.setValueForKey?this.setValueForKey("syncProgress",new a(t)):this.syncProgress=t}}function r(t,r,i){this.__syncListening||(this.__syncListening=!0,n.call(this,this));var s=i.xhr||e.$.ajaxSettings&&e.$.ajaxSettings.xhr||function(){return new window.XMLHttpRequest},l=o.bind(this);i.xhr=function(){var e=s();return e.addEventListener("progress",l),e.upload.addEventListener("progress",l),e}}var i=e.Cord,s=i.Model,l=i.Collection,a=i.ForceValue;i.parseError=i.parseError||function(e){return e.status};var u=s.prototype.sync;s.prototype.sync=function(){return r.apply(this,arguments),u.apply(this,arguments)};var c=l.prototype.sync;l.prototype.sync=function(){return r.apply(this,arguments),c.apply(this,arguments)},i.mixins.syncing={properties:{syncing:{value:!1,readonly:!0},syncProgress:{value:0,readonly:!0},syncError:{value:null,readonly:!0}},_initSyncingProperties:function(e){e&&(this.setValueForKey("syncing",new a(e.syncing)),this.setValueForKey("syncProgress",new a(e.syncProgress)),this.setValueForKey("syncError",new a(e.syncError)),n.call(this,e))},setModel:function(e){this._initSyncingProperties(e)},setCollection:function(e){this._initSyncingProperties(e)}}}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";var t=e.Cord,n=t.Model,o=t.EmptyModel,r=t.ForceValue,i={url:/^(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/i,ip:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,slug:/^[a-z0-9-]+$/i,username:/^[a-z0-9_@\-\+\.]{3,150}$/i,color:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i};t.Validation={formats:i},t.scopes.errors={namespace:"errors",observe:function(){},unobserve:function(){},getValue:function(e){return this.errors.get(e)},setValue:function(){}},t.validate=function(e,t){var o,r,s,l=t.type.split(" ")[0];if(null===e||""===e&&"string"===t.type)return!t.required||"required";if("string"===l&&"string"!=typeof e||"date"===l&&!(e instanceof Date)||"int"===l&&(+e!==e||e%1!==0)||"float"===l&&"number"!=typeof e||"bool"===l&&"boolean"!=typeof e||"array"===l&&!Array.isArray(e)||"model"===l&&!(e instanceof n))return"type";if(null!==t.equals&&void 0!==t.equals){if(Array.isArray(t.equals)){if(t.equals.indexOf(e)===-1)return"equals"}else if("object"==typeof t.equals){if(void 0===t.equals[e])return"equals"}else if(e!==t.equals)return"equals"}else if("string"===t.type){if(t.min&&e.length<t.min)return"min";if(t.max&&e.length>t.max)return"max";if(t.format)for(s=Array.isArray(t.format)?t.format:[t.format],o=0;o<s.length;++o)if(r=s[o],"string"==typeof r&&(r=i[r]),"function"==typeof r&&!r(e)||r instanceof RegExp&&!r.test(e))return"format"}else{if(t.min&&e<t.min)return"min";if(t.max&&e>t.max)return"max"}return!0},t.parseValidationError=function(e,t,n,o){var r="string"===t.type?"The length of ":"",i="string"===t.type?" characters":"";switch(n){case"required":return o+" is required";case"min":return r+o+" must be greater than or equal to "+t.min+i;case"max":return r+o+" must be less than or equal to "+t.max+i;case"format":if("string"==typeof t.format)return o+" is not a valid "+t.format}return o+" is not valid"},t.mixins.validation={errors:o,properties:{allErrors:{readonly:!0},latestError:{readonly:!0},isValid:function(e){return!e||!e.length}},events:{"submit form":"validateForm"},initialize:function(){this.errors=new n,this.listenTo(this.errors,"change",function(e){var t,n=e.changedAttributes();if(n)for(t in n)this._invokeObservers("errors",t,n[t])}),this._addInvalidListener(this.model)},setModel:function(e){this._addInvalidListener(e)},validateForm:function(e){return this.model.isValid()?(this._onValid(this.model,[]),!0):(e&&(e.preventDefault(),e.stopPropagation()),!1)},_addInvalidListener:function(e){e!==o&&this.listenTo(e,"invalid",this._onInvalid)},_onInvalid:function(e,n){var o,i,s,l,a;for(o in n)l="format"===n[o]&&this.model.instructions&&this.model.instructions[o]?this.model.instructions[o]:t.parseValidationError(this.model.get(o),this.model.rules[o],n[o],this.model.titles[o]||"This field",o),this.errors.set(o,l);a=this.model.changedAttributes();for(o in a)n[o]||this.errors.unset(o);s=[],i=this.errors.attributes;for(o in i)s.push(i[o]);this.setValueForKey("allErrors",new r(s)),this.setValueForKey("latestError",new r(l))},_onValid:function(){this._onInvalid(this.model,{})}},t.mixins.validateOnBlur={initialize:function(){this._addBlurListener(this.model)},setModel:function(e){this._addBlurListener(e)},_addBlurListener:function(e){e!==o&&e.listen("change",function(){this.model.validate(this.model.changedAttributes())&&this._onValid(this.model,[])})}},n.prototype.validate=function(e){var n,o,r,i={};if(!this.rules)return null;for(n in e)o=this.rules[n],o&&(null===o.equals&&void 0===o.equals&&(o.equals=this.choices&&this.choices[n]),r=t.validate(e[n],o),r!==!0&&(i[n]=r));return this.extendedValidate&&this.extendedValidate(i),Object.keys(i).length?i:void 0}}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone")),function(e){"use strict";function t(e,t){var n=function(t){var n,o=t.changedAttributes();if(o)for(n in o)this._invokeObservers(e,n,o[n])};return{namespace:e,model:t,observe:function(){this._hasObservers(e)||this.listenTo(t,"change",n)},unobserve:function(){this._hasObservers(e)||this.stopListening(t,"change",n)},getValue:function(e){return t.get(e)},setValue:function(e,n){t.set(e,n)}}}var n=e.Cord,o=e.Model,r=n.scopes;n.SharedScopes={set:function(e,n){if(e=e.toLowerCase(),r[e])throw new Error("Attempting to override an existing scope.");r[e]=t(e,n),this[e]=n}},n.SharedScopes.set("shared",new o),n.SharedScopes.set("route",new o)}(("object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global).Backbone||require("backbone"));